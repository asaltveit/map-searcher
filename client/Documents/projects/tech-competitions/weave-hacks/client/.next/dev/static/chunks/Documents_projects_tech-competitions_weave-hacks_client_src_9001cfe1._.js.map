{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/annasaltveit/Documents/projects/tech-competitions/weave-hacks/client/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sPAAO,EAAC,IAAA,6NAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/annasaltveit/Documents/projects/tech-competitions/weave-hacks/client/src/lib/map-config.ts"],"sourcesContent":["export const DEFAULT_VIEW_STATE = {\n  longitude: -98.5795,\n  latitude: 39.8283,\n  zoom: 4,\n} as const;\n\nexport const MAP_STYLES = {\n  liberty: 'https://tiles.openfreemap.org/styles/liberty',\n} as const;\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,qBAAqB;IAChC,WAAW,CAAC;IACZ,UAAU;IACV,MAAM;AACR;AAEO,MAAM,aAAa;IACxB,SAAS;AACX"}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///Users/annasaltveit/Documents/projects/tech-competitions/weave-hacks/client/src/components/map/map-pins-layer.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef } from 'react';\nimport { Source, Layer, Popup, useMap } from 'react-map-gl/maplibre';\nexport const PINS_LAYER_ID = 'research-pins';\nconst PINS_SOURCE_ID = 'research-pins-source';\n\nconst circleLayerStyle = {\n  id: PINS_LAYER_ID,\n  type: 'circle' as const,\n  source: PINS_SOURCE_ID,\n  paint: {\n    'circle-radius': 10,\n    'circle-color': '#0d9488',\n    'circle-stroke-width': 2,\n    'circle-stroke-color': '#ffffff',\n  },\n};\n\nfunction getBounds(features: GeoJSON.Feature<GeoJSON.Point>[]): [[number, number], [number, number]] | null {\n  if (features.length === 0) return null;\n  let minLng = Infinity;\n  let minLat = Infinity;\n  let maxLng = -Infinity;\n  let maxLat = -Infinity;\n  for (const f of features) {\n    const coords = f.geometry?.coordinates;\n    if (!coords || coords.length < 2) continue;\n    const [lng, lat] = coords as [number, number];\n    minLng = Math.min(minLng, lng);\n    minLat = Math.min(minLat, lat);\n    maxLng = Math.max(maxLng, lng);\n    maxLat = Math.max(maxLat, lat);\n  }\n  return [[minLng, minLat], [maxLng, maxLat]];\n}\n\nexport type PinsSelectedFeature = {\n  feature: GeoJSON.Feature<GeoJSON.Point>;\n  lngLat: [number, number];\n};\n\nexport interface MapPinsLayerProps {\n  /** GeoJSON FeatureCollection of points (e.g. demo or API data from map agent). */\n  data: GeoJSON.FeatureCollection | null;\n  /** Currently selected feature (from map click in parent). */\n  selectedFeature: PinsSelectedFeature | null;\n  /** Clear selection (e.g. when popup closes). */\n  onClearSelect: () => void;\n  /** Callback when a pin is selected (for aria-live / screen reader). */\n  onSelectFeature?: (feature: GeoJSON.Feature<GeoJSON.Point> | null) => void;\n}\n\nexport function MapPinsLayer({\n  data,\n  selectedFeature,\n  onClearSelect,\n}: MapPinsLayerProps) {\n  const fitDoneRef = useRef(false);\n  const mapRef = useMap();\n\n  const features = (data?.features ?? []) as GeoJSON.Feature<GeoJSON.Point>[];\n  const hasFeatures = features.length > 0;\n\n  useEffect(() => {\n    if (!hasFeatures || fitDoneRef.current) return;\n    const map = mapRef?.current?.getMap?.();\n    if (!map) return;\n    const bounds = getBounds(features);\n    if (!bounds) return;\n    const padding = 40;\n    const duration =\n      typeof window !== 'undefined' && window.matchMedia('(prefers-reduced-motion: reduce)').matches ? 0 : 600;\n    map.fitBounds(bounds, { padding, duration });\n    fitDoneRef.current = true;\n  }, [hasFeatures, features, mapRef]);\n\n  if (!data || data.features.length === 0) return null;\n\n  return (\n    <>\n      <Source id={PINS_SOURCE_ID} type=\"geojson\" data={data}>\n        <Layer {...circleLayerStyle} />\n      </Source>\n      {selectedFeature && (\n        <Popup\n          longitude={selectedFeature.lngLat[0]}\n          latitude={selectedFeature.lngLat[1]}\n          onClose={onClearSelect}\n          closeButton\n          closeOnClick={false}\n          anchor=\"bottom\"\n          className=\"map-pin-popup\"\n        >\n          <div className=\"min-w-[180px] max-w-[280px] text-left\">\n            <p className=\"font-semibold text-foreground\">\n              {(selectedFeature.feature.properties as { title?: string })?.title ?? 'Location'}\n            </p>\n            {(selectedFeature.feature.properties as { snippet?: string })?.snippet && (\n              <p className=\"mt-1 text-sm text-muted-foreground\">\n                {(selectedFeature.feature.properties as { snippet?: string }).snippet}\n              </p>\n            )}\n          </div>\n        </Popup>\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;;;AAHA;;;AAIO,MAAM,gBAAgB;AAC7B,MAAM,iBAAiB;AAEvB,MAAM,mBAAmB;IACvB,IAAI;IACJ,MAAM;IACN,QAAQ;IACR,OAAO;QACL,iBAAiB;QACjB,gBAAgB;QAChB,uBAAuB;QACvB,uBAAuB;IACzB;AACF;AAEA,SAAS,UAAU,QAA0C;IAC3D,IAAI,SAAS,MAAM,KAAK,GAAG,OAAO;IAClC,IAAI,SAAS;IACb,IAAI,SAAS;IACb,IAAI,SAAS,CAAC;IACd,IAAI,SAAS,CAAC;IACd,KAAK,MAAM,KAAK,SAAU;QACxB,MAAM,SAAS,EAAE,QAAQ,EAAE;QAC3B,IAAI,CAAC,UAAU,OAAO,MAAM,GAAG,GAAG;QAClC,MAAM,CAAC,KAAK,IAAI,GAAG;QACnB,SAAS,KAAK,GAAG,CAAC,QAAQ;QAC1B,SAAS,KAAK,GAAG,CAAC,QAAQ;QAC1B,SAAS,KAAK,GAAG,CAAC,QAAQ;QAC1B,SAAS,KAAK,GAAG,CAAC,QAAQ;IAC5B;IACA,OAAO;QAAC;YAAC;YAAQ;SAAO;QAAE;YAAC;YAAQ;SAAO;KAAC;AAC7C;AAkBO,SAAS,aAAa,EAC3B,IAAI,EACJ,eAAe,EACf,aAAa,EACK;;IAClB,MAAM,aAAa,IAAA,oPAAM,EAAC;IAC1B,MAAM,SAAS,IAAA,2PAAM;IAErB,MAAM,WAAY,MAAM,YAAY,EAAE;IACtC,MAAM,cAAc,SAAS,MAAM,GAAG;IAEtC,IAAA,uPAAS;kCAAC;YACR,IAAI,CAAC,eAAe,WAAW,OAAO,EAAE;YACxC,MAAM,MAAM,QAAQ,SAAS;YAC7B,IAAI,CAAC,KAAK;YACV,MAAM,SAAS,UAAU;YACzB,IAAI,CAAC,QAAQ;YACb,MAAM,UAAU;YAChB,MAAM,WACJ,+CAAkB,eAAe,OAAO,UAAU,CAAC,oCAAoC,OAAO,GAAG,IAAI;YACvG,IAAI,SAAS,CAAC,QAAQ;gBAAE;gBAAS;YAAS;YAC1C,WAAW,OAAO,GAAG;QACvB;iCAAG;QAAC;QAAa;QAAU;KAAO;IAElC,IAAI,CAAC,QAAQ,KAAK,QAAQ,CAAC,MAAM,KAAK,GAAG,OAAO;IAEhD,qBACE;;0BACE,0QAAC,2PAAM;gBAAC,IAAI;gBAAgB,MAAK;gBAAU,MAAM;0BAC/C,cAAA,0QAAC,0PAAK;oBAAE,GAAG,gBAAgB;;;;;;;;;;;YAE5B,iCACC,0QAAC,0PAAK;gBACJ,WAAW,gBAAgB,MAAM,CAAC,EAAE;gBACpC,UAAU,gBAAgB,MAAM,CAAC,EAAE;gBACnC,SAAS;gBACT,WAAW;gBACX,cAAc;gBACd,QAAO;gBACP,WAAU;0BAEV,cAAA,0QAAC;oBAAI,WAAU;;sCACb,0QAAC;4BAAE,WAAU;sCACV,AAAC,gBAAgB,OAAO,CAAC,UAAU,EAAyB,SAAS;;;;;;wBAEtE,gBAAgB,OAAO,CAAC,UAAU,EAA2B,yBAC7D,0QAAC;4BAAE,WAAU;sCACV,AAAC,gBAAgB,OAAO,CAAC,UAAU,CAA0B,OAAO;;;;;;;;;;;;;;;;;;;AAQrF;GAvDgB;;QAMC,2PAAM;;;KANP"}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///Users/annasaltveit/Documents/projects/tech-competitions/weave-hacks/client/src/data/demo-research-geojson.ts"],"sourcesContent":["/**\n * Demo GeoJSON for hackathon: sample research locations with titles and snippets.\n * Used when no live workflow data is available so the map always has pins.\n */\n\nexport type DemoFeatureProperties = {\n  title: string;\n  snippet?: string;\n  articleUrl?: string;\n  id?: string;\n};\n\nexport type DemoGeoJSONFeature = {\n  type: \"Feature\";\n  geometry: { type: \"Point\"; coordinates: [number, number] };\n  properties: DemoFeatureProperties;\n};\n\nexport type DemoFeatureCollection = {\n  type: \"FeatureCollection\";\n  features: DemoGeoJSONFeature[];\n};\n\nexport const DEMO_RESEARCH_GEOJSON: DemoFeatureCollection = {\n  type: \"FeatureCollection\",\n  features: [\n    {\n      type: \"Feature\",\n      geometry: { type: \"Point\", coordinates: [-122.6765, 45.5231] },\n      properties: {\n        id: \"demo-1\",\n        title: \"Portland Art Museum\",\n        snippet: \"Research: Major museum in downtown Portland with rotating exhibits.\",\n      },\n    },\n    {\n      type: \"Feature\",\n      geometry: { type: \"Point\", coordinates: [-122.6819, 45.5122] },\n      properties: {\n        id: \"demo-2\",\n        title: \"Powell's City of Books\",\n        snippet: \"Research: World's largest independent bookstore, a Portland landmark.\",\n      },\n    },\n    {\n      type: \"Feature\",\n      geometry: { type: \"Point\", coordinates: [-122.6587, 45.5302] },\n      properties: {\n        id: \"demo-3\",\n        title: \"Washington Park\",\n        snippet: \"Research: Home to Oregon Zoo, Japanese Garden, and Hoyt Arboretum.\",\n      },\n    },\n    {\n      type: \"Feature\",\n      geometry: { type: \"Point\", coordinates: [-122.6764, 45.5152] },\n      properties: {\n        id: \"demo-4\",\n        title: \"Portland Saturday Market\",\n        snippet: \"Research: Open-air arts and crafts market by the waterfront.\",\n      },\n    },\n  ],\n};\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AAoBM,MAAM,wBAA+C;IAC1D,MAAM;IACN,UAAU;QACR;YACE,MAAM;YACN,UAAU;gBAAE,MAAM;gBAAS,aAAa;oBAAC,CAAC;oBAAU;iBAAQ;YAAC;YAC7D,YAAY;gBACV,IAAI;gBACJ,OAAO;gBACP,SAAS;YACX;QACF;QACA;YACE,MAAM;YACN,UAAU;gBAAE,MAAM;gBAAS,aAAa;oBAAC,CAAC;oBAAU;iBAAQ;YAAC;YAC7D,YAAY;gBACV,IAAI;gBACJ,OAAO;gBACP,SAAS;YACX;QACF;QACA;YACE,MAAM;YACN,UAAU;gBAAE,MAAM;gBAAS,aAAa;oBAAC,CAAC;oBAAU;iBAAQ;YAAC;YAC7D,YAAY;gBACV,IAAI;gBACJ,OAAO;gBACP,SAAS;YACX;QACF;QACA;YACE,MAAM;YACN,UAAU;gBAAE,MAAM;gBAAS,aAAa;oBAAC,CAAC;oBAAU;iBAAQ;YAAC;YAC7D,YAAY;gBACV,IAAI;gBACJ,OAAO;gBACP,SAAS;YACX;QACF;KACD;AACH"}},
    {"offset": {"line": 277, "column": 0}, "map": {"version":3,"sources":["file:///Users/annasaltveit/Documents/projects/tech-competitions/weave-hacks/client/src/components/map/map-container.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useCallback } from 'react';\nimport Map, { NavigationControl } from 'react-map-gl/maplibre';\n// Relative path avoids Turbopack \"server relative imports\" error when aliasing maplibre-gl\nimport '../../../node_modules/maplibre-gl/dist/maplibre-gl.css';\nimport { cn } from '@/lib/utils';\nimport { DEFAULT_VIEW_STATE, MAP_STYLES } from '@/lib/map-config';\nimport { MapPinsLayer, PINS_LAYER_ID, type PinsSelectedFeature } from './map-pins-layer';\nimport { DEMO_RESEARCH_GEOJSON } from '@/data/demo-research-geojson';\n\ninterface MapContainerProps {\n  className?: string;\n  children?: React.ReactNode;\n  /** GeoJSON to show (from map agent or demo). When null/undefined, uses demo data. */\n  pinsData?: GeoJSON.FeatureCollection | null;\n}\n\nexport function MapContainer({ className, children, pinsData }: MapContainerProps) {\n  const [selectedFeature, setSelectedFeature] = useState<PinsSelectedFeature | null>(null);\n\n  const data = pinsData ?? DEMO_RESEARCH_GEOJSON;\n  const hasPins = data.features.length > 0;\n\n  const handleMapClick = useCallback(\n    (ev: { features?: Array<GeoJSON.Feature>; lngLat: { lng: number; lat: number } }) => {\n      const f = ev.features?.[0];\n      if (!f || f.geometry?.type !== 'Point') {\n        setSelectedFeature(null);\n        return;\n      }\n      const coords = (f.geometry as GeoJSON.Point).coordinates as [number, number];\n      setSelectedFeature({\n        feature: f as GeoJSON.Feature<GeoJSON.Point>,\n        lngLat: [ev.lngLat.lng, ev.lngLat.lat],\n      });\n    },\n    []\n  );\n\n  const clearSelection = useCallback(() => setSelectedFeature(null), []);\n\n  return (\n    <div\n      className={cn(\"relative border-border\", className)}\n      role=\"application\"\n      aria-label=\"Interactive map of research locations\"\n    >\n      <Map\n        initialViewState={DEFAULT_VIEW_STATE}\n        style={{ width: '100%', height: '100%' }}\n        mapStyle={MAP_STYLES.liberty}\n        onClick={handleMapClick}\n        cursor={hasPins ? 'pointer' : undefined}\n        interactiveLayerIds={hasPins ? [PINS_LAYER_ID] : undefined}\n      >\n        <NavigationControl position=\"top-right\" />\n        <MapPinsLayer\n          data={data}\n          selectedFeature={selectedFeature}\n          onClearSelect={clearSelection}\n        />\n        {children}\n      </Map>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAGA;AACA;AACA;AACA;;;AATA;;;;;;;;AAkBO,SAAS,aAAa,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAqB;;IAC/E,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,sPAAQ,EAA6B;IAEnF,MAAM,OAAO,YAAY,mPAAqB;IAC9C,MAAM,UAAU,KAAK,QAAQ,CAAC,MAAM,GAAG;IAEvC,MAAM,iBAAiB,IAAA,yPAAW;oDAChC,CAAC;YACC,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC,EAAE;YAC1B,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,SAAS,SAAS;gBACtC,mBAAmB;gBACnB;YACF;YACA,MAAM,SAAS,AAAC,EAAE,QAAQ,CAAmB,WAAW;YACxD,mBAAmB;gBACjB,SAAS;gBACT,QAAQ;oBAAC,GAAG,MAAM,CAAC,GAAG;oBAAE,GAAG,MAAM,CAAC,GAAG;iBAAC;YACxC;QACF;mDACA,EAAE;IAGJ,MAAM,iBAAiB,IAAA,yPAAW;oDAAC,IAAM,mBAAmB;mDAAO,EAAE;IAErE,qBACE,0QAAC;QACC,WAAW,IAAA,yMAAE,EAAC,0BAA0B;QACxC,MAAK;QACL,cAAW;kBAEX,cAAA,0QAAC,0SAAG;YACF,kBAAkB,iOAAkB;YACpC,OAAO;gBAAE,OAAO;gBAAQ,QAAQ;YAAO;YACvC,UAAU,yNAAU,CAAC,OAAO;YAC5B,SAAS;YACT,QAAQ,UAAU,YAAY;YAC9B,qBAAqB,UAAU;gBAAC,kPAAa;aAAC,GAAG;;8BAEjD,0QAAC,sQAAiB;oBAAC,UAAS;;;;;;8BAC5B,0QAAC,iPAAY;oBACX,MAAM;oBACN,iBAAiB;oBACjB,eAAe;;;;;;gBAEhB;;;;;;;;;;;;AAIT;GAhDgB;KAAA"}},
    {"offset": {"line": 382, "column": 0}, "map": {"version":3,"sources":["file:///Users/annasaltveit/Documents/projects/tech-competitions/weave-hacks/client/src/components/map/index.ts"],"sourcesContent":["export { MapContainer } from './map-container';\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 392, "column": 0}, "map": {"version":3,"sources":["file:///Users/annasaltveit/Documents/projects/tech-competitions/weave-hacks/client/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        xs: \"h-6 gap-1 rounded-md px-2 text-xs has-[>svg]:px-1.5 [&_svg:not([class*='size-'])]:size-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n        \"icon-xs\": \"size-6 rounded-md [&_svg:not([class*='size-'])]:size-3\",\n        \"icon-sm\": \"size-8\",\n        \"icon-lg\": \"size-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant = \"default\",\n  size = \"default\",\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      data-variant={variant}\n      data-size={size}\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uPAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,UAAU,SAAS,EACnB,OAAO,SAAS,EAChB,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wPAAI,GAAG;IAE9B,qBACE,0QAAC;QACC,aAAU;QACV,gBAAc;QACd,aAAW;QACX,WAAW,IAAA,yMAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KArBS"}},
    {"offset": {"line": 461, "column": 0}, "map": {"version":3,"sources":["file:///Users/annasaltveit/Documents/projects/tech-competitions/weave-hacks/client/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,0QAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,yMAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 492, "column": 0}, "map": {"version":3,"sources":["file:///Users/annasaltveit/Documents/projects/tech-competitions/weave-hacks/client/src/lib/api.ts"],"sourcesContent":["/**\n * Client API for the backend (server-nest by default).\n * Set NEXT_PUBLIC_API_URL in production (e.g. https://api.example.com).\n * In dev, when the client runs on port 3000, defaults to http://localhost:3001 (run server-nest with PORT=3001).\n */\nfunction getBase(): string {\n  if (typeof window === \"undefined\") return \"\";\n  const env = process.env.NEXT_PUBLIC_API_URL;\n  if (env) return env.replace(/\\/$/, \"\");\n  return window.location.port === \"3000\" ? \"http://localhost:3001\" : \"\";\n}\n\nexport interface AgentIds {\n  researchAgentId: string;\n  mapAgentId: string;\n  researchBlockId: string;\n}\n\n/** Get or create workflow agents (research + map + shared block). Uses /api/workflow/agents so both Express and server-nest work. */\nexport async function getAgents(): Promise<AgentIds> {\n  const res = await fetch(`${getBase()}/api/workflow/agents`, {\n    credentials: \"include\",\n  });\n  if (!res.ok) throw new Error(await res.text().catch(() => res.statusText));\n  return res.json();\n}\n\n/** Send a user message to a workflow agent. Uses /api/workflow/send-message so both Express and server-nest work. Returns Letta response. */\nexport async function sendAgentMessage(\n  agentId: string,\n  content: string\n): Promise<unknown> {\n  const res = await fetch(`${getBase()}/api/workflow/send-message`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    credentials: \"include\",\n    body: JSON.stringify({ agentId, content }),\n  });\n  if (!res.ok) throw new Error(await res.text().catch(() => res.statusText));\n  return res.json();\n}\n\nexport async function updateResearchBlock(\n  researchBlockId: string,\n  value: string\n): Promise<void> {\n  const res = await fetch(`${getBase()}/api/workflow/update-block`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    credentials: \"include\",\n    body: JSON.stringify({ researchBlockId, value }),\n  });\n  if (!res.ok) throw new Error(await res.text().catch(() => res.statusText));\n}\n\n/**\n * Extract the last assistant text from a Letta message response.\n * Letta response shape may include messages[], steps[], or similar.\n */\nexport function getLastAssistantContent(response: unknown): string {\n  const r = response as Record<string, unknown>;\n  const messages = (r?.messages as Array<{ role?: string; content?: string }>) ?? (r?.steps as Array<{ role?: string; content?: string }>);\n  if (Array.isArray(messages)) {\n    for (let i = messages.length - 1; i >= 0; i--) {\n      const m = messages[i];\n      if (m?.role === \"assistant\" && typeof m?.content === \"string\") return m.content;\n    }\n  }\n  const content = r?.content ?? r?.output;\n  if (typeof content === \"string\") return content;\n  return \"\";\n}\n\nexport interface MapStateResponse {\n  geoJson: GeoJSON.FeatureCollection;\n  view?: { center: [number, number]; zoom: number };\n}\n\n/** Get current map state (GeoJSON + optional view) from last map agent run. */\nexport async function getMapState(): Promise<MapStateResponse | null> {\n  const res = await fetch(`${getBase()}/api/workflow/map-state`, { credentials: \"include\" });\n  if (!res.ok) return null;\n  const data = await res.json();\n  if (!data?.geoJson?.type || data.geoJson.type !== \"FeatureCollection\") return null;\n  return data as MapStateResponse;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAOc;AAPd;;;;CAIC,GACD,SAAS;IACP;;IACA,MAAM,MAAM,wPAAO,CAAC,GAAG,CAAC,mBAAmB;IAC3C,IAAI,KAAK,OAAO,IAAI,OAAO,CAAC,OAAO;IACnC,OAAO,OAAO,QAAQ,CAAC,IAAI,KAAK,SAAS,0BAA0B;AACrE;AASO,eAAe;IACpB,MAAM,MAAM,MAAM,MAAM,GAAG,UAAU,oBAAoB,CAAC,EAAE;QAC1D,aAAa;IACf;IACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,IAAI,UAAU;IACxE,OAAO,IAAI,IAAI;AACjB;AAGO,eAAe,iBACpB,OAAe,EACf,OAAe;IAEf,MAAM,MAAM,MAAM,MAAM,GAAG,UAAU,0BAA0B,CAAC,EAAE;QAChE,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,aAAa;QACb,MAAM,KAAK,SAAS,CAAC;YAAE;YAAS;QAAQ;IAC1C;IACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,IAAI,UAAU;IACxE,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,oBACpB,eAAuB,EACvB,KAAa;IAEb,MAAM,MAAM,MAAM,MAAM,GAAG,UAAU,0BAA0B,CAAC,EAAE;QAChE,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,aAAa;QACb,MAAM,KAAK,SAAS,CAAC;YAAE;YAAiB;QAAM;IAChD;IACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,IAAI,UAAU;AAC1E;AAMO,SAAS,wBAAwB,QAAiB;IACvD,MAAM,IAAI;IACV,MAAM,WAAW,AAAC,GAAG,YAA4D,GAAG;IACpF,IAAI,MAAM,OAAO,CAAC,WAAW;QAC3B,IAAK,IAAI,IAAI,SAAS,MAAM,GAAG,GAAG,KAAK,GAAG,IAAK;YAC7C,MAAM,IAAI,QAAQ,CAAC,EAAE;YACrB,IAAI,GAAG,SAAS,eAAe,OAAO,GAAG,YAAY,UAAU,OAAO,EAAE,OAAO;QACjF;IACF;IACA,MAAM,UAAU,GAAG,WAAW,GAAG;IACjC,IAAI,OAAO,YAAY,UAAU,OAAO;IACxC,OAAO;AACT;AAQO,eAAe;IACpB,MAAM,MAAM,MAAM,MAAM,GAAG,UAAU,uBAAuB,CAAC,EAAE;QAAE,aAAa;IAAU;IACxF,IAAI,CAAC,IAAI,EAAE,EAAE,OAAO;IACpB,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,IAAI,CAAC,MAAM,SAAS,QAAQ,KAAK,OAAO,CAAC,IAAI,KAAK,qBAAqB,OAAO;IAC9E,OAAO;AACT"}},
    {"offset": {"line": 581, "column": 0}, "map": {"version":3,"sources":["file:///Users/annasaltveit/Documents/projects/tech-competitions/weave-hacks/client/src/components/AgentInput.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useCallback } from \"react\";\nimport { useSpeechRecognition } from \"@/hooks/useSpeechRecognition\";\nimport { useSpeechSynthesis } from \"@/hooks/useSpeechSynthesis\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  getAgents,\n  sendAgentMessage,\n  updateResearchBlock,\n  getLastAssistantContent,\n  type AgentIds,\n} from \"@/lib/api\";\nimport { cn } from \"@/lib/utils\";\nimport { Search, FileText, Mic, MicOff, Volume2 } from \"lucide-react\";\n\nconst MAP_PROMPT =\n  \"Update the map using the research in your context. Add layers for any places or routes mentioned.\";\n\nexport function AgentInput({\n  className,\n  onAfterMapAgentResponse,\n}: {\n  className?: string;\n  /** Called after map agent responds so the client can refetch map state and update the map. */\n  onAfterMapAgentResponse?: () => Promise<void>;\n}) {\n  const [agents, setAgents] = useState<AgentIds | null>(null);\n  const [askInput, setAskInput] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [lastResponse, setLastResponse] = useState(\"\");\n  const [error, setError] = useState<string | null>(null);\n\n  const ensureAgents = useCallback(async (): Promise<AgentIds> => {\n    if (agents) return agents;\n    const ids = await getAgents();\n    setAgents(ids);\n    return ids;\n  }, [agents]);\n\n  const submitMessage = useCallback(\n    async (userText: string) => {\n      const text = userText.trim();\n      if (!text) return;\n      setLoading(true);\n      setError(null);\n      setLastResponse(\"\");\n      try {\n        const ids = await ensureAgents();\n        const researchResponse = await sendAgentMessage(ids.researchAgentId, text);\n        const researchContent = getLastAssistantContent(researchResponse);\n        if (researchContent) {\n          await updateResearchBlock(ids.researchBlockId, researchContent);\n          const mapResponse = await sendAgentMessage(ids.mapAgentId, MAP_PROMPT);\n          const mapContent = getLastAssistantContent(mapResponse);\n          setLastResponse(mapContent || researchContent);\n          await onAfterMapAgentResponse?.();\n        } else {\n          setLastResponse(getLastAssistantContent(researchResponse) || \"No reply from research agent.\");\n        }\n      } catch (e) {\n        setError(e instanceof Error ? e.message : String(e));\n      } finally {\n        setLoading(false);\n      }\n    },\n    [ensureAgents, onAfterMapAgentResponse]\n  );\n\n  const handleAskSubmit = () => {\n    submitMessage(askInput);\n    setAskInput(\"\");\n  };\n\n  return (\n    <div className={cn(\"space-y-6\", className)}>\n      {/* Research query bar: prominent, search-style */}\n      <section className=\"space-y-2\" aria-label=\"Research query\">\n        <label htmlFor=\"ask-input\" className=\"sr-only\">\n          Ask a research question\n        </label>\n        <div className=\"flex flex-wrap gap-2 sm:flex-nowrap\">\n          <div className=\"relative flex-1\">\n            <Search\n              className=\"pointer-events-none absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground\"\n              aria-hidden\n            />\n            <Input\n              id=\"ask-input\"\n              type=\"text\"\n              placeholder=\"Search events, places, or ask a question…\"\n              value={askInput}\n              onChange={(e) => setAskInput(e.target.value)}\n              onKeyDown={(e) => e.key === \"Enter\" && handleAskSubmit()}\n              disabled={loading}\n              className=\"min-h-[48px] touch-manipulation pl-9 text-base shadow-sm sm:min-h-[52px] sm:pl-10 sm:text-base\"\n              aria-describedby=\"ask-hint\"\n            />\n          </div>\n          <Button\n            type=\"button\"\n            onClick={handleAskSubmit}\n            disabled={loading || !askInput.trim()}\n            className=\"min-h-[48px] shrink-0 touch-manipulation px-5 sm:min-h-[52px]\"\n          >\n            {loading ? \"Researching…\" : \"Research\"}\n          </Button>\n        </div>\n        <p id=\"ask-hint\" className=\"text-xs text-muted-foreground\">\n          Or use the mic below to speak your request.\n        </p>\n      </section>\n\n      {error && (\n        <div\n          className=\"rounded-lg border border-destructive/30 bg-destructive/5 px-4 py-3 text-sm text-destructive\"\n          role=\"alert\"\n        >\n          {error}\n        </div>\n      )}\n\n      {lastResponse && (\n        <section\n          className=\"rounded-xl border border-border bg-card px-4 py-4 shadow-sm sm:px-5 sm:py-5\"\n          aria-label=\"Findings\"\n        >\n          <div className=\"mb-3 flex items-center gap-2 text-sm font-medium text-foreground\">\n            <FileText className=\"size-4 shrink-0 text-muted-foreground\" aria-hidden />\n            Findings\n          </div>\n          <p className=\"whitespace-pre-wrap text-sm leading-relaxed text-foreground/90\">{lastResponse}</p>\n        </section>\n      )}\n\n      <VoiceSection\n        onTranscript={submitMessage}\n        textToSpeak={lastResponse || undefined}\n        className=\"w-full max-w-xl border-border/80 bg-muted/30\"\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 809, "column": 0}, "map": {"version":3,"sources":["file:///Users/annasaltveit/Documents/projects/tech-competitions/weave-hacks/client/src/components/ResearchMapPage.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { MapContainer } from \"@/components/map\";\nimport { AgentInput } from \"@/components/AgentInput\";\nimport { getMapState } from \"@/lib/api\";\nimport { DEMO_RESEARCH_GEOJSON } from \"@/data/demo-research-geojson\";\nimport { MapPin } from \"lucide-react\";\n\nexport function ResearchMapPage() {\n  const [mapState, setMapState] = useState<GeoJSON.FeatureCollection | null>(null);\n\n  useEffect(() => {\n    getMapState()\n      .then((s) => s?.geoJson && setMapState(s.geoJson))\n      .catch(() => {});\n  }, []);\n\n  const onAfterMapAgentResponse = useCallback(async () => {\n    const s = await getMapState();\n    if (s?.geoJson) setMapState(s.geoJson);\n  }, []);\n\n  const pinsData = mapState ?? DEMO_RESEARCH_GEOJSON;\n\n  return (\n    <div className=\"flex min-h-screen min-h-[100dvh] flex-col bg-background font-sans\">\n      {/* Header: product name + live indicator */}\n      <header className=\"sticky top-0 z-10 border-b border-border/80 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80\">\n        <div className=\"mx-auto flex h-14 max-w-4xl items-center justify-between px-4 sm:px-6\">\n          <div className=\"flex items-center gap-2\">\n            <span className=\"font-display text-lg font-semibold tracking-tight text-foreground sm:text-xl\">\n              Pulse\n            </span>\n            <span className=\"hidden rounded bg-muted px-1.5 py-0.5 text-[10px] font-medium uppercase tracking-wider text-muted-foreground sm:inline\">\n              Research\n            </span>\n          </div>\n          <div className=\"flex items-center gap-1.5 rounded-full border border-border bg-muted/50 px-2.5 py-1 text-xs text-muted-foreground\">\n            <span className=\"relative flex h-1.5 w-1.5\">\n              <span className=\"absolute inline-flex h-full w-full animate-ping rounded-full bg-accent opacity-60\" />\n              <span className=\"relative inline-flex h-1.5 w-1.5 rounded-full bg-accent\" />\n            </span>\n            Live research\n          </div>\n        </div>\n      </header>\n\n      <main\n        id=\"main-content\"\n        className=\"mx-auto w-full max-w-4xl flex-1 px-4 py-6 sm:px-6 sm:py-8\"\n        aria-label=\"Main content\"\n      >\n        {/* Hero: headline + subline */}\n        <section className=\"mb-6 sm:mb-8\">\n          <h1 className=\"font-display text-2xl font-semibold tracking-tight text-foreground sm:text-3xl\">\n            Current events, researched and mapped\n          </h1>\n          <p className=\"mt-1.5 max-w-xl text-sm text-muted-foreground sm:text-base\">\n            Ask about places, routes, or events in plain language. Results are researched and plotted on the map below.\n          </p>\n        </section>\n\n        {/* Research query + response + voice (single flow) */}\n        <AgentInput onAfterMapAgentResponse={onAfterMapAgentResponse} />\n\n        {/* Map: findings layer */}\n        <section className=\"mt-6 sm:mt-8\" aria-label=\"Research map\">\n          <div className=\"mb-2 flex items-center gap-2 text-sm text-muted-foreground\">\n            <MapPin className=\"size-4 shrink-0\" aria-hidden />\n            <span>Findings on map</span>\n          </div>\n          <MapContainer\n            className=\"h-[320px] w-full min-h-[260px] rounded-xl border border-border overflow-hidden shadow-sm sm:h-[420px] sm:min-h-[340px]\"\n            pinsData={pinsData}\n          />\n        </section>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AASO,SAAS;;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,sPAAQ,EAAmC;IAE3E,IAAA,uPAAS;qCAAC;YACR,IAAA,gNAAW,IACR,IAAI;6CAAC,CAAC,IAAM,GAAG,WAAW,YAAY,EAAE,OAAO;4CAC/C,KAAK;6CAAC,KAAO;;QAClB;oCAAG,EAAE;IAEL,MAAM,0BAA0B,IAAA,yPAAW;gEAAC;YAC1C,MAAM,IAAI,MAAM,IAAA,gNAAW;YAC3B,IAAI,GAAG,SAAS,YAAY,EAAE,OAAO;QACvC;+DAAG,EAAE;IAEL,MAAM,WAAW,YAAY,mPAAqB;IAElD,qBACE,0QAAC;QAAI,WAAU;;0BAEb,0QAAC;gBAAO,WAAU;0BAChB,cAAA,0QAAC;oBAAI,WAAU;;sCACb,0QAAC;4BAAI,WAAU;;8CACb,0QAAC;oCAAK,WAAU;8CAA+E;;;;;;8CAG/F,0QAAC;oCAAK,WAAU;8CAAyH;;;;;;;;;;;;sCAI3I,0QAAC;4BAAI,WAAU;;8CACb,0QAAC;oCAAK,WAAU;;sDACd,0QAAC;4CAAK,WAAU;;;;;;sDAChB,0QAAC;4CAAK,WAAU;;;;;;;;;;;;gCACX;;;;;;;;;;;;;;;;;;0BAMb,0QAAC;gBACC,IAAG;gBACH,WAAU;gBACV,cAAW;;kCAGX,0QAAC;wBAAQ,WAAU;;0CACjB,0QAAC;gCAAG,WAAU;0CAAiF;;;;;;0CAG/F,0QAAC;gCAAE,WAAU;0CAA6D;;;;;;;;;;;;kCAM5E,0QAAC,8NAAU;wBAAC,yBAAyB;;;;;;kCAGrC,0QAAC;wBAAQ,WAAU;wBAAe,cAAW;;0CAC3C,0QAAC;gCAAI,WAAU;;kDACb,0QAAC,oSAAM;wCAAC,WAAU;wCAAkB,aAAW;;;;;;kDAC/C,0QAAC;kDAAK;;;;;;;;;;;;0CAER,0QAAC,6OAAY;gCACX,WAAU;gCACV,UAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtB;GAvEgB;KAAA"}}]
}