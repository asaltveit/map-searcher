{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,+MAAO,EAAC,IAAA,sLAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/lib/map-config.ts"],"sourcesContent":["export const DEFAULT_VIEW_STATE = {\n  longitude: -98.5795,\n  latitude: 39.8283,\n  zoom: 4,\n} as const;\n\nexport const MAP_STYLES = {\n  liberty: 'https://tiles.openfreemap.org/styles/liberty',\n} as const;\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,qBAAqB;IAChC,WAAW,CAAC;IACZ,UAAU;IACV,MAAM;AACR;AAEO,MAAM,aAAa;IACxB,SAAS;AACX"}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/map/map-pins-layer.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef } from 'react';\nimport { Source, Layer, Popup, useMap } from 'react-map-gl/maplibre';\nexport const PINS_LAYER_ID = 'research-pins';\nconst PINS_SOURCE_ID = 'research-pins-source';\n\nconst circleLayerStyle = {\n  id: PINS_LAYER_ID,\n  type: 'circle' as const,\n  source: PINS_SOURCE_ID,\n  paint: {\n    'circle-radius': 10,\n    'circle-color': '#0d9488',\n    'circle-stroke-width': 2,\n    'circle-stroke-color': '#ffffff',\n  },\n};\n\nfunction getBounds(features: GeoJSON.Feature<GeoJSON.Point>[]): [[number, number], [number, number]] | null {\n  if (features.length === 0) return null;\n  let minLng = Infinity;\n  let minLat = Infinity;\n  let maxLng = -Infinity;\n  let maxLat = -Infinity;\n  for (const f of features) {\n    const coords = f.geometry?.coordinates;\n    if (!coords || coords.length < 2) continue;\n    const [lng, lat] = coords as [number, number];\n    minLng = Math.min(minLng, lng);\n    minLat = Math.min(minLat, lat);\n    maxLng = Math.max(maxLng, lng);\n    maxLat = Math.max(maxLat, lat);\n  }\n  return [[minLng, minLat], [maxLng, maxLat]];\n}\n\nexport type PinsSelectedFeature = {\n  feature: GeoJSON.Feature<GeoJSON.Point>;\n  lngLat: [number, number];\n};\n\nexport interface MapPinsLayerProps {\n  /** GeoJSON FeatureCollection of points (e.g. demo or API data from map agent). */\n  data: GeoJSON.FeatureCollection | null;\n  /** Currently selected feature (from map click in parent). */\n  selectedFeature: PinsSelectedFeature | null;\n  /** Clear selection (e.g. when popup closes). */\n  onClearSelect: () => void;\n  /** Callback when a pin is selected (for aria-live / screen reader). */\n  onSelectFeature?: (feature: GeoJSON.Feature<GeoJSON.Point> | null) => void;\n}\n\nexport function MapPinsLayer({\n  data,\n  selectedFeature,\n  onClearSelect,\n}: MapPinsLayerProps) {\n  const fitDoneRef = useRef(false);\n  const mapRef = useMap();\n\n  const features = (data?.features ?? []) as GeoJSON.Feature<GeoJSON.Point>[];\n  const hasFeatures = features.length > 0;\n\n  useEffect(() => {\n    if (!hasFeatures || fitDoneRef.current) return;\n    const map = mapRef?.current?.getMap?.();\n    if (!map) return;\n    const bounds = getBounds(features);\n    if (!bounds) return;\n    const padding = 40;\n    const duration =\n      typeof window !== 'undefined' && window.matchMedia('(prefers-reduced-motion: reduce)').matches ? 0 : 600;\n    map.fitBounds(bounds, { padding, duration });\n    fitDoneRef.current = true;\n  }, [hasFeatures, features, mapRef]);\n\n  if (!data || data.features.length === 0) return null;\n\n  return (\n    <>\n      <Source id={PINS_SOURCE_ID} type=\"geojson\" data={data}>\n        <Layer {...circleLayerStyle} />\n      </Source>\n      {selectedFeature && (\n        <Popup\n          longitude={selectedFeature.lngLat[0]}\n          latitude={selectedFeature.lngLat[1]}\n          onClose={onClearSelect}\n          closeButton\n          closeOnClick={false}\n          anchor=\"bottom\"\n          className=\"map-pin-popup\"\n        >\n          <div className=\"min-w-[180px] max-w-[280px] text-left\">\n            <p className=\"font-semibold text-foreground\">\n              {(selectedFeature.feature.properties as { title?: string })?.title ?? 'Location'}\n            </p>\n            {(selectedFeature.feature.properties as { snippet?: string })?.snippet && (\n              <p className=\"mt-1 text-sm text-muted-foreground\">\n                {(selectedFeature.feature.properties as { snippet?: string }).snippet}\n              </p>\n            )}\n          </div>\n        </Popup>\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;;;AAHA;;;AAIO,MAAM,gBAAgB;AAC7B,MAAM,iBAAiB;AAEvB,MAAM,mBAAmB;IACvB,IAAI;IACJ,MAAM;IACN,QAAQ;IACR,OAAO;QACL,iBAAiB;QACjB,gBAAgB;QAChB,uBAAuB;QACvB,uBAAuB;IACzB;AACF;AAEA,SAAS,UAAU,QAA0C;IAC3D,IAAI,SAAS,MAAM,KAAK,GAAG,OAAO;IAClC,IAAI,SAAS;IACb,IAAI,SAAS;IACb,IAAI,SAAS,CAAC;IACd,IAAI,SAAS,CAAC;IACd,KAAK,MAAM,KAAK,SAAU;QACxB,MAAM,SAAS,EAAE,QAAQ,EAAE;QAC3B,IAAI,CAAC,UAAU,OAAO,MAAM,GAAG,GAAG;QAClC,MAAM,CAAC,KAAK,IAAI,GAAG;QACnB,SAAS,KAAK,GAAG,CAAC,QAAQ;QAC1B,SAAS,KAAK,GAAG,CAAC,QAAQ;QAC1B,SAAS,KAAK,GAAG,CAAC,QAAQ;QAC1B,SAAS,KAAK,GAAG,CAAC,QAAQ;IAC5B;IACA,OAAO;QAAC;YAAC;YAAQ;SAAO;QAAE;YAAC;YAAQ;SAAO;KAAC;AAC7C;AAkBO,SAAS,aAAa,EAC3B,IAAI,EACJ,eAAe,EACf,aAAa,EACK;;IAClB,MAAM,aAAa,IAAA,6MAAM,EAAC;IAC1B,MAAM,SAAS,IAAA,oNAAM;IAErB,MAAM,WAAY,MAAM,YAAY,EAAE;IACtC,MAAM,cAAc,SAAS,MAAM,GAAG;IAEtC,IAAA,gNAAS;kCAAC;YACR,IAAI,CAAC,eAAe,WAAW,OAAO,EAAE;YACxC,MAAM,MAAM,QAAQ,SAAS;YAC7B,IAAI,CAAC,KAAK;YACV,MAAM,SAAS,UAAU;YACzB,IAAI,CAAC,QAAQ;YACb,MAAM,UAAU;YAChB,MAAM,WACJ,+CAAkB,eAAe,OAAO,UAAU,CAAC,oCAAoC,OAAO,GAAG,IAAI;YACvG,IAAI,SAAS,CAAC,QAAQ;gBAAE;gBAAS;YAAS;YAC1C,WAAW,OAAO,GAAG;QACvB;iCAAG;QAAC;QAAa;QAAU;KAAO;IAElC,IAAI,CAAC,QAAQ,KAAK,QAAQ,CAAC,MAAM,KAAK,GAAG,OAAO;IAEhD,qBACE;;0BACE,mOAAC,oNAAM;gBAAC,IAAI;gBAAgB,MAAK;gBAAU,MAAM;0BAC/C,cAAA,mOAAC,mNAAK;oBAAE,GAAG,gBAAgB;;;;;;;;;;;YAE5B,iCACC,mOAAC,mNAAK;gBACJ,WAAW,gBAAgB,MAAM,CAAC,EAAE;gBACpC,UAAU,gBAAgB,MAAM,CAAC,EAAE;gBACnC,SAAS;gBACT,WAAW;gBACX,cAAc;gBACd,QAAO;gBACP,WAAU;0BAEV,cAAA,mOAAC;oBAAI,WAAU;;sCACb,mOAAC;4BAAE,WAAU;sCACV,AAAC,gBAAgB,OAAO,CAAC,UAAU,EAAyB,SAAS;;;;;;wBAEtE,gBAAgB,OAAO,CAAC,UAAU,EAA2B,yBAC7D,mOAAC;4BAAE,WAAU;sCACV,AAAC,gBAAgB,OAAO,CAAC,UAAU,CAA0B,OAAO;;;;;;;;;;;;;;;;;;;AAQrF;GAvDgB;;QAMC,oNAAM;;;KANP"}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/data/demo-research-geojson.ts"],"sourcesContent":["/**\n * Demo GeoJSON for hackathon: sample research locations with titles and snippets.\n * Used when no live workflow data is available so the map always has pins.\n */\n\nexport type DemoFeatureProperties = {\n  title: string;\n  snippet?: string;\n  articleUrl?: string;\n  id?: string;\n};\n\nexport type DemoGeoJSONFeature = {\n  type: \"Feature\";\n  geometry: { type: \"Point\"; coordinates: [number, number] };\n  properties: DemoFeatureProperties;\n};\n\nexport type DemoFeatureCollection = {\n  type: \"FeatureCollection\";\n  features: DemoGeoJSONFeature[];\n};\n\nexport const DEMO_RESEARCH_GEOJSON: DemoFeatureCollection = {\n  type: \"FeatureCollection\",\n  features: [\n    {\n      type: \"Feature\",\n      geometry: { type: \"Point\", coordinates: [-122.6765, 45.5231] },\n      properties: {\n        id: \"demo-1\",\n        title: \"Portland Art Museum\",\n        snippet: \"Research: Major museum in downtown Portland with rotating exhibits.\",\n      },\n    },\n    {\n      type: \"Feature\",\n      geometry: { type: \"Point\", coordinates: [-122.6819, 45.5122] },\n      properties: {\n        id: \"demo-2\",\n        title: \"Powell's City of Books\",\n        snippet: \"Research: World's largest independent bookstore, a Portland landmark.\",\n      },\n    },\n    {\n      type: \"Feature\",\n      geometry: { type: \"Point\", coordinates: [-122.6587, 45.5302] },\n      properties: {\n        id: \"demo-3\",\n        title: \"Washington Park\",\n        snippet: \"Research: Home to Oregon Zoo, Japanese Garden, and Hoyt Arboretum.\",\n      },\n    },\n    {\n      type: \"Feature\",\n      geometry: { type: \"Point\", coordinates: [-122.6764, 45.5152] },\n      properties: {\n        id: \"demo-4\",\n        title: \"Portland Saturday Market\",\n        snippet: \"Research: Open-air arts and crafts market by the waterfront.\",\n      },\n    },\n  ],\n};\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AAoBM,MAAM,wBAA+C;IAC1D,MAAM;IACN,UAAU;QACR;YACE,MAAM;YACN,UAAU;gBAAE,MAAM;gBAAS,aAAa;oBAAC,CAAC;oBAAU;iBAAQ;YAAC;YAC7D,YAAY;gBACV,IAAI;gBACJ,OAAO;gBACP,SAAS;YACX;QACF;QACA;YACE,MAAM;YACN,UAAU;gBAAE,MAAM;gBAAS,aAAa;oBAAC,CAAC;oBAAU;iBAAQ;YAAC;YAC7D,YAAY;gBACV,IAAI;gBACJ,OAAO;gBACP,SAAS;YACX;QACF;QACA;YACE,MAAM;YACN,UAAU;gBAAE,MAAM;gBAAS,aAAa;oBAAC,CAAC;oBAAU;iBAAQ;YAAC;YAC7D,YAAY;gBACV,IAAI;gBACJ,OAAO;gBACP,SAAS;YACX;QACF;QACA;YACE,MAAM;YACN,UAAU;gBAAE,MAAM;gBAAS,aAAa;oBAAC,CAAC;oBAAU;iBAAQ;YAAC;YAC7D,YAAY;gBACV,IAAI;gBACJ,OAAO;gBACP,SAAS;YACX;QACF;KACD;AACH"}},
    {"offset": {"line": 277, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/map/map-container.tsx"],"sourcesContent":["'use client';\n\nimport { forwardRef, useState, useCallback } from 'react';\nimport Map, { NavigationControl } from 'react-map-gl/maplibre';\nimport type { MapRef, MapLayerMouseEvent, ViewStateChangeEvent } from 'react-map-gl/maplibre';\n// Relative path avoids Turbopack \"server relative imports\" error when aliasing maplibre-gl\nimport '../../../node_modules/maplibre-gl/dist/maplibre-gl.css';\nimport { cn } from '@/lib/utils';\nimport { DEFAULT_VIEW_STATE, MAP_STYLES } from '@/lib/map-config';\nimport { MapPinsLayer, PINS_LAYER_ID, type PinsSelectedFeature } from './map-pins-layer';\nimport { DEMO_RESEARCH_GEOJSON } from '@/data/demo-research-geojson';\n\ninterface ViewState {\n  longitude: number;\n  latitude: number;\n  zoom: number;\n}\n\ninterface MapContainerProps {\n  className?: string;\n  children?: React.ReactNode;\n  /** GeoJSON to show (from map agent or demo). When null/undefined, uses demo data. */\n  pinsData?: GeoJSON.FeatureCollection | null;\n  initialViewState?: ViewState;\n  interactiveLayerIds?: string[];\n  onLayerClick?: (event: MapLayerMouseEvent) => void;\n  onMove?: (event: ViewStateChangeEvent) => void;\n  cursor?: string;\n}\n\nexport const MapContainer = forwardRef<MapRef, MapContainerProps>(function MapContainer(\n  {\n    className,\n    children,\n    pinsData,\n    initialViewState,\n    interactiveLayerIds,\n    onLayerClick,\n    onMove,\n    cursor,\n  },\n  ref\n) {\n  const [selectedFeature, setSelectedFeature] = useState<PinsSelectedFeature | null>(null);\n\n  const data = pinsData ?? DEMO_RESEARCH_GEOJSON;\n  const hasPins = data.features.length > 0;\n\n  const handleMapClick = useCallback(\n    (ev: MapLayerMouseEvent) => {\n      // If external handler provided, call it\n      if (onLayerClick && ev.features && ev.features.length > 0) {\n        onLayerClick(ev);\n      }\n\n      // Internal pin selection logic\n      const f = ev.features?.[0];\n      if (!f || f.geometry?.type !== 'Point') {\n        setSelectedFeature(null);\n        return;\n      }\n      const coords = (f.geometry as GeoJSON.Point).coordinates as [number, number];\n      setSelectedFeature({\n        feature: f as GeoJSON.Feature<GeoJSON.Point>,\n        lngLat: [ev.lngLat.lng, ev.lngLat.lat],\n      });\n    },\n    [onLayerClick]\n  );\n\n  const clearSelection = useCallback(() => setSelectedFeature(null), []);\n\n  // Combine internal and external interactive layer IDs\n  const allInteractiveLayerIds = [\n    ...(hasPins ? [PINS_LAYER_ID] : []),\n    ...(interactiveLayerIds || []),\n  ];\n\n  return (\n    <div\n      className={cn(\"relative border-border\", className)}\n      role=\"application\"\n      aria-label=\"Interactive map of research locations\"\n    >\n      <Map\n        ref={ref}\n        initialViewState={initialViewState || DEFAULT_VIEW_STATE}\n        style={{ width: '100%', height: '100%' }}\n        mapStyle={MAP_STYLES.liberty}\n        onClick={handleMapClick}\n        onMove={onMove}\n        cursor={cursor || (hasPins ? 'pointer' : undefined)}\n        interactiveLayerIds={allInteractiveLayerIds.length > 0 ? allInteractiveLayerIds : undefined}\n      >\n        <NavigationControl position=\"top-right\" />\n        <MapPinsLayer\n          data={data}\n          selectedFeature={selectedFeature}\n          onClearSelect={clearSelection}\n        />\n        {children}\n      </Map>\n    </div>\n  );\n});\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAIA;AACA;AACA;AACA;;;AAVA;;;;;;;;AA8BO,MAAM,6BAAe,GAAA,IAAA,iNAAU,UAA4B,SAAS,aACzE,EACE,SAAS,EACT,QAAQ,EACR,QAAQ,EACR,gBAAgB,EAChB,mBAAmB,EACnB,YAAY,EACZ,MAAM,EACN,MAAM,EACP,EACD,GAAG;;IAEH,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,+MAAQ,EAA6B;IAEnF,MAAM,OAAO,YAAY,4MAAqB;IAC9C,MAAM,UAAU,KAAK,QAAQ,CAAC,MAAM,GAAG;IAEvC,MAAM,iBAAiB,IAAA,kNAAW;iEAChC,CAAC;YACC,wCAAwC;YACxC,IAAI,gBAAgB,GAAG,QAAQ,IAAI,GAAG,QAAQ,CAAC,MAAM,GAAG,GAAG;gBACzD,aAAa;YACf;YAEA,+BAA+B;YAC/B,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC,EAAE;YAC1B,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,SAAS,SAAS;gBACtC,mBAAmB;gBACnB;YACF;YACA,MAAM,SAAS,AAAC,EAAE,QAAQ,CAAmB,WAAW;YACxD,mBAAmB;gBACjB,SAAS;gBACT,QAAQ;oBAAC,GAAG,MAAM,CAAC,GAAG;oBAAE,GAAG,MAAM,CAAC,GAAG;iBAAC;YACxC;QACF;gEACA;QAAC;KAAa;IAGhB,MAAM,iBAAiB,IAAA,kNAAW;iEAAC,IAAM,mBAAmB;gEAAO,EAAE;IAErE,sDAAsD;IACtD,MAAM,yBAAyB;WACzB,UAAU;YAAC,2MAAa;SAAC,GAAG,EAAE;WAC9B,uBAAuB,EAAE;KAC9B;IAED,qBACE,mOAAC;QACC,WAAW,IAAA,kKAAE,EAAC,0BAA0B;QACxC,MAAK;QACL,cAAW;kBAEX,cAAA,mOAAC,mQAAG;YACF,KAAK;YACL,kBAAkB,oBAAoB,0LAAkB;YACxD,OAAO;gBAAE,OAAO;gBAAQ,QAAQ;YAAO;YACvC,UAAU,kLAAU,CAAC,OAAO;YAC5B,SAAS;YACT,QAAQ;YACR,QAAQ,UAAU,CAAC,UAAU,YAAY,SAAS;YAClD,qBAAqB,uBAAuB,MAAM,GAAG,IAAI,yBAAyB;;8BAElF,mOAAC,+NAAiB;oBAAC,UAAS;;;;;;8BAC5B,mOAAC,0MAAY;oBACX,MAAM;oBACN,iBAAiB;oBACjB,eAAe;;;;;;gBAEhB;;;;;;;;;;;;AAIT"}},
    {"offset": {"line": 396, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/map/LocationPins.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useCallback } from 'react';\nimport { Source, Layer, Popup } from 'react-map-gl/maplibre';\nimport type { GeoJsonFeatureCollection, GeoJsonFeature } from '@/lib/api';\nimport type { MapLayerMouseEvent } from 'maplibre-gl';\n\ninterface LocationPinsProps {\n  data: GeoJsonFeatureCollection;\n  onFeatureClick?: (feature: GeoJsonFeature) => void;\n}\n\nconst layerStyle = {\n  id: 'alert-locations',\n  type: 'circle' as const,\n  paint: {\n    'circle-radius': 8,\n    'circle-color': '#ef4444', // red-500\n    'circle-stroke-width': 2,\n    'circle-stroke-color': '#ffffff',\n    'circle-opacity': 0.9,\n  },\n};\n\nconst layerHoverStyle = {\n  id: 'alert-locations-hover',\n  type: 'circle' as const,\n  paint: {\n    'circle-radius': 12,\n    'circle-color': '#dc2626', // red-600\n    'circle-stroke-width': 3,\n    'circle-stroke-color': '#ffffff',\n    'circle-opacity': 1,\n  },\n  filter: ['==', ['get', 'locationId'], ''],\n};\n\nfunction formatDate(dateStr: string): string {\n  return new Date(dateStr).toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n  });\n}\n\nexport function LocationPins({ data, onFeatureClick }: LocationPinsProps) {\n  console.log(`[PINS] LocationPins RENDER - featureCount=${data.features.length}`);\n  if (data.features.length === 0) {\n    console.warn(`[PINS] LocationPins WARNING - NO FEATURES! Map will be empty.`);\n  } else {\n    console.log(`[PINS] LocationPins SAMPLE FEATURES:`, data.features.slice(0, 3).map(f => ({ mention: f.properties.mention, coords: f.geometry.coordinates })));\n  }\n\n  const [popupInfo, setPopupInfo] = useState<GeoJsonFeature | null>(null);\n  const [hoverInfo, setHoverInfo] = useState<string | null>(null);\n\n  const onClick = useCallback(\n    (event: MapLayerMouseEvent) => {\n      const feature = event.features?.[0];\n      console.log(`[PINS] onClick - feature clicked:`, feature?.properties?.mention);\n      if (feature && feature.geometry.type === 'Point') {\n        const props = feature.properties as GeoJsonFeature['properties'];\n        const geoJsonFeature: GeoJsonFeature = {\n          type: 'Feature',\n          geometry: {\n            type: 'Point',\n            coordinates: (feature.geometry as GeoJSON.Point).coordinates as [number, number],\n          },\n          properties: props,\n        };\n        console.log(`[PINS] onClick SHOWING popup for:`, props.mention);\n        setPopupInfo(geoJsonFeature);\n        onFeatureClick?.(geoJsonFeature);\n      }\n    },\n    [onFeatureClick]\n  );\n\n  const onMouseEnter = useCallback((event: MapLayerMouseEvent) => {\n    const feature = event.features?.[0];\n    console.log(`[PINS] onMouseEnter - locationId=${feature?.properties?.locationId}`);\n    if (feature) {\n      setHoverInfo(feature.properties?.locationId || null);\n    }\n  }, []);\n\n  const onMouseLeave = useCallback(() => {\n    console.log(`[PINS] onMouseLeave`);\n    setHoverInfo(null);\n  }, []);\n\n  // Create hover filter\n  const hoverFilter = hoverInfo\n    ? ['==', ['get', 'locationId'], hoverInfo]\n    : ['==', ['get', 'locationId'], ''];\n\n  return (\n    <>\n      <Source id=\"alert-locations\" type=\"geojson\" data={data}>\n        <Layer\n          {...layerStyle}\n          beforeId={undefined}\n        />\n        <Layer\n          {...layerHoverStyle}\n          filter={hoverFilter as unknown as undefined}\n        />\n      </Source>\n\n      {popupInfo && (\n        <Popup\n          longitude={popupInfo.geometry.coordinates[0]}\n          latitude={popupInfo.geometry.coordinates[1]}\n          anchor=\"bottom\"\n          onClose={() => setPopupInfo(null)}\n          closeOnClick={false}\n          className=\"location-popup\"\n        >\n          <div className=\"p-2 max-w-xs\">\n            <h3 className=\"font-semibold text-sm mb-1 line-clamp-2\">\n              {popupInfo.properties.articleTitle}\n            </h3>\n            <p className=\"text-xs text-zinc-600 dark:text-zinc-400 mb-2\">\n              {popupInfo.properties.mention}\n            </p>\n            {popupInfo.properties.formattedAddress && (\n              <p className=\"text-xs text-zinc-500 dark:text-zinc-500 mb-2\">\n                {popupInfo.properties.formattedAddress}\n              </p>\n            )}\n            <div className=\"flex items-center justify-between text-xs\">\n              <span className=\"text-zinc-400\">\n                {formatDate(popupInfo.properties.publishedAt)}\n              </span>\n              <a\n                href={popupInfo.properties.articleUrl}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-blue-600 hover:underline\"\n              >\n                Read article\n              </a>\n            </div>\n          </div>\n        </Popup>\n      )}\n    </>\n  );\n}\n\n// Export the interactiveLayerIds for the map\nexport const LOCATION_PINS_LAYER_IDS = ['alert-locations'];\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 633, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/map/index.ts"],"sourcesContent":["export { MapContainer } from './map-container';\nexport { LocationPins, LOCATION_PINS_LAYER_IDS } from './LocationPins';\n"],"names":[],"mappings":";AAAA;AACA"}},
    {"offset": {"line": 645, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/hooks/useSpeechRecognition.ts"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useRef, useState } from \"react\";\n\ndeclare global {\n  interface Window {\n    SpeechRecognition?: typeof SpeechRecognition;\n    webkitSpeechRecognition?: typeof SpeechRecognition;\n  }\n}\n\nfunction getSpeechRecognition(): typeof SpeechRecognition | null {\n  if (typeof window === \"undefined\") return null;\n  return window.SpeechRecognition ?? window.webkitSpeechRecognition ?? null;\n}\n\nexport function useSpeechRecognition(options?: {\n  continuous?: boolean;\n  lang?: string;\n  onResult?: (transcript: string, isFinal: boolean) => void;\n}) {\n  const [isListening, setIsListening] = useState(false);\n  const [transcript, setTranscript] = useState(\"\");\n  const [interimTranscript, setInterimTranscript] = useState(\"\");\n  const [error, setError] = useState<string | null>(null);\n  // Defer support check to useEffect so server and first client render match (avoid hydration mismatch)\n  const [isSupported, setIsSupported] = useState<boolean | null>(null);\n  const recognitionRef = useRef<{ stop: () => void } | null>(null);\n  const onResultRef = useRef(options?.onResult);\n\n  useEffect(() => {\n    setIsSupported(!!getSpeechRecognition());\n  }, []);\n\n  useEffect(() => {\n    onResultRef.current = options?.onResult;\n  }, [options?.onResult]);\n\n  const start = useCallback(() => {\n    const SR = getSpeechRecognition();\n    if (!SR) {\n      setError(\"Speech recognition is not supported in this browser.\");\n      return;\n    }\n    setError(null);\n    setTranscript(\"\");\n    setInterimTranscript(\"\");\n    const recognition = new SR();\n    recognition.continuous = options?.continuous ?? true;\n    recognition.lang = options?.lang ?? \"en-US\";\n    recognition.interimResults = true;\n\n    recognition.onresult = (event: SpeechRecognitionEvent) => {\n      let interim = \"\";\n      let final = \"\";\n      for (let i = event.resultIndex; i < event.results.length; i++) {\n        const result = event.results[i];\n        const text = result[0].transcript;\n        if (result.isFinal) {\n          final += text;\n        } else {\n          interim += text;\n        }\n      }\n      if (interim) setInterimTranscript(interim);\n      if (final) {\n        setTranscript((prev) => (prev + final).trim());\n        setInterimTranscript(\"\");\n        onResultRef.current?.(final, true);\n      }\n    };\n\n    recognition.onerror = (event: SpeechRecognitionErrorEvent) => {\n      if (event.error === \"not-allowed\") {\n        setError(\"Microphone access was denied.\");\n      } else if (event.error === \"no-speech\") {\n        setError(\"No speech detected. Try again.\");\n      } else {\n        setError(event.error || \"Speech recognition error.\");\n      }\n      setIsListening(false);\n    };\n\n    recognition.onend = () => {\n      setIsListening(false);\n    };\n\n    recognition.start();\n    recognitionRef.current = recognition;\n    setIsListening(true);\n  }, [options?.continuous, options?.lang]);\n\n  const stop = useCallback(() => {\n    if (recognitionRef.current) {\n      recognitionRef.current.stop();\n      recognitionRef.current = null;\n    }\n    setIsListening(false);\n  }, []);\n\n  const reset = useCallback(() => {\n    setTranscript(\"\");\n    setInterimTranscript(\"\");\n    setError(null);\n  }, []);\n\n  return {\n    isSupported,\n    isListening,\n    transcript,\n    interimTranscript,\n    error,\n    start,\n    stop,\n    reset,\n  };\n}\n"],"names":[],"mappings":";;;;AAEA;;AAFA;;AAWA,SAAS;IACP;;IACA,OAAO,OAAO,iBAAiB,IAAI,OAAO,uBAAuB,IAAI;AACvE;AAEO,SAAS,qBAAqB,OAIpC;;IACC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,+MAAQ,EAAC;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,+MAAQ,EAAC;IAC7C,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,+MAAQ,EAAC;IAC3D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+MAAQ,EAAgB;IAClD,sGAAsG;IACtG,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,+MAAQ,EAAiB;IAC/D,MAAM,iBAAiB,IAAA,6MAAM,EAA8B;IAC3D,MAAM,cAAc,IAAA,6MAAM,EAAC,SAAS;IAEpC,IAAA,gNAAS;0CAAC;YACR,eAAe,CAAC,CAAC;QACnB;yCAAG,EAAE;IAEL,IAAA,gNAAS;0CAAC;YACR,YAAY,OAAO,GAAG,SAAS;QACjC;yCAAG;QAAC,SAAS;KAAS;IAEtB,MAAM,QAAQ,IAAA,kNAAW;mDAAC;YACxB,MAAM,KAAK;YACX,IAAI,CAAC,IAAI;gBACP,SAAS;gBACT;YACF;YACA,SAAS;YACT,cAAc;YACd,qBAAqB;YACrB,MAAM,cAAc,IAAI;YACxB,YAAY,UAAU,GAAG,SAAS,cAAc;YAChD,YAAY,IAAI,GAAG,SAAS,QAAQ;YACpC,YAAY,cAAc,GAAG;YAE7B,YAAY,QAAQ;2DAAG,CAAC;oBACtB,IAAI,UAAU;oBACd,IAAI,QAAQ;oBACZ,IAAK,IAAI,IAAI,MAAM,WAAW,EAAE,IAAI,MAAM,OAAO,CAAC,MAAM,EAAE,IAAK;wBAC7D,MAAM,SAAS,MAAM,OAAO,CAAC,EAAE;wBAC/B,MAAM,OAAO,MAAM,CAAC,EAAE,CAAC,UAAU;wBACjC,IAAI,OAAO,OAAO,EAAE;4BAClB,SAAS;wBACX,OAAO;4BACL,WAAW;wBACb;oBACF;oBACA,IAAI,SAAS,qBAAqB;oBAClC,IAAI,OAAO;wBACT;uEAAc,CAAC,OAAS,CAAC,OAAO,KAAK,EAAE,IAAI;;wBAC3C,qBAAqB;wBACrB,YAAY,OAAO,GAAG,OAAO;oBAC/B;gBACF;;YAEA,YAAY,OAAO;2DAAG,CAAC;oBACrB,IAAI,MAAM,KAAK,KAAK,eAAe;wBACjC,SAAS;oBACX,OAAO,IAAI,MAAM,KAAK,KAAK,aAAa;wBACtC,SAAS;oBACX,OAAO;wBACL,SAAS,MAAM,KAAK,IAAI;oBAC1B;oBACA,eAAe;gBACjB;;YAEA,YAAY,KAAK;2DAAG;oBAClB,eAAe;gBACjB;;YAEA,YAAY,KAAK;YACjB,eAAe,OAAO,GAAG;YACzB,eAAe;QACjB;kDAAG;QAAC,SAAS;QAAY,SAAS;KAAK;IAEvC,MAAM,OAAO,IAAA,kNAAW;kDAAC;YACvB,IAAI,eAAe,OAAO,EAAE;gBAC1B,eAAe,OAAO,CAAC,IAAI;gBAC3B,eAAe,OAAO,GAAG;YAC3B;YACA,eAAe;QACjB;iDAAG,EAAE;IAEL,MAAM,QAAQ,IAAA,kNAAW;mDAAC;YACxB,cAAc;YACd,qBAAqB;YACrB,SAAS;QACX;kDAAG,EAAE;IAEL,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF;GApGgB"}},
    {"offset": {"line": 777, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/hooks/useSpeechSynthesis.ts"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useState } from \"react\";\n\nexport function useSpeechSynthesis(options?: { lang?: string; rate?: number; pitch?: number }) {\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [isSupported] = useState(() =>\n    typeof window !== \"undefined\" && \"speechSynthesis\" in window\n  );\n\n  const speak = useCallback(\n    (text: string) => {\n      if (typeof window === \"undefined\" || !window.speechSynthesis) return;\n      window.speechSynthesis.cancel();\n      const utterance = new SpeechSynthesisUtterance(text);\n      utterance.lang = options?.lang ?? \"en-US\";\n      utterance.rate = options?.rate ?? 1;\n      utterance.pitch = options?.pitch ?? 1;\n      utterance.onstart = () => setIsSpeaking(true);\n      utterance.onend = () => setIsSpeaking(false);\n      utterance.onerror = () => setIsSpeaking(false);\n      window.speechSynthesis.speak(utterance);\n    },\n    [options?.lang, options?.rate, options?.pitch]\n  );\n\n  const cancel = useCallback(() => {\n    if (typeof window !== \"undefined\" && window.speechSynthesis) {\n      window.speechSynthesis.cancel();\n      setIsSpeaking(false);\n    }\n  }, []);\n\n  return { isSupported, isSpeaking, speak, cancel };\n}\n"],"names":[],"mappings":";;;;AAEA;;AAFA;;AAIO,SAAS,mBAAmB,OAA0D;;IAC3F,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,+MAAQ,EAAC;IAC7C,MAAM,CAAC,YAAY,GAAG,IAAA,+MAAQ;uCAAC,IAC7B,+CAAkB,eAAe,qBAAqB;;IAGxD,MAAM,QAAQ,IAAA,kNAAW;iDACvB,CAAC;YACC,IAAI,+CAAkB,eAAe,CAAC,OAAO,eAAe,EAAE;YAC9D,OAAO,eAAe,CAAC,MAAM;YAC7B,MAAM,YAAY,IAAI,yBAAyB;YAC/C,UAAU,IAAI,GAAG,SAAS,QAAQ;YAClC,UAAU,IAAI,GAAG,SAAS,QAAQ;YAClC,UAAU,KAAK,GAAG,SAAS,SAAS;YACpC,UAAU,OAAO;yDAAG,IAAM,cAAc;;YACxC,UAAU,KAAK;yDAAG,IAAM,cAAc;;YACtC,UAAU,OAAO;yDAAG,IAAM,cAAc;;YACxC,OAAO,eAAe,CAAC,KAAK,CAAC;QAC/B;gDACA;QAAC,SAAS;QAAM,SAAS;QAAM,SAAS;KAAM;IAGhD,MAAM,SAAS,IAAA,kNAAW;kDAAC;YACzB,IAAI,+CAAkB,eAAe,OAAO,eAAe,EAAE;gBAC3D,OAAO,eAAe,CAAC,MAAM;gBAC7B,cAAc;YAChB;QACF;iDAAG,EAAE;IAEL,OAAO;QAAE;QAAa;QAAY;QAAO;IAAO;AAClD;GA9BgB"}},
    {"offset": {"line": 838, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        xs: \"h-6 gap-1 rounded-md px-2 text-xs has-[>svg]:px-1.5 [&_svg:not([class*='size-'])]:size-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n        \"icon-xs\": \"size-6 rounded-md [&_svg:not([class*='size-'])]:size-3\",\n        \"icon-sm\": \"size-8\",\n        \"icon-lg\": \"size-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant = \"default\",\n  size = \"default\",\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      data-variant={variant}\n      data-size={size}\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,gNAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,UAAU,SAAS,EACnB,OAAO,SAAS,EAChB,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,iNAAI,GAAG;IAE9B,qBACE,mOAAC;QACC,aAAU;QACV,gBAAc;QACd,aAAW;QACX,WAAW,IAAA,kKAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KArBS"}},
    {"offset": {"line": 907, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,mOAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,kKAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 938, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/lib/api.ts"],"sourcesContent":["/** Default backend port when running client in dev (server-nest). */\nconst DEFAULT_API_PORT = \"3001\";\n\n/**\n * Client API for the backend (server-nest by default).\n * Set NEXT_PUBLIC_API_URL in production (e.g. https://api.example.com).\n * In dev, defaults to http://localhost:3001 so API calls always hit the backend even if the client runs on another port.\n */\nfunction getBase(): string {\n  if (typeof window === \"undefined\") return \"\";\n  const env = process.env.NEXT_PUBLIC_API_URL;\n  if (env) return env.replace(/\\/$/, \"\");\n  if (process.env.NODE_ENV === \"development\") return `http://localhost:${DEFAULT_API_PORT}`;\n  return window.location.port === \"3000\" ? `http://localhost:${DEFAULT_API_PORT}` : \"\";\n}\n\nexport interface AgentIds {\n  researchAgentId: string;\n  mapAgentId: string;\n  researchBlockId: string;\n}\n\n/** Turn API error response body into a user-facing message (avoid showing HTML 404 pages). */\nasync function getErrorMessage(res: Response): Promise<string> {\n  const text = await res.text().catch(() => res.statusText);\n  const trimmed = text.trim();\n  if (trimmed.startsWith(\"<!\") || trimmed.toLowerCase().startsWith(\"<!doctype\")) {\n    return \"Could not reach the research service. Make sure the backend is running (e.g. server-nest on port 3001).\";\n  }\n  if (res.status === 404) return \"Research service not found. Is the backend running?\";\n  if (res.status >= 500) return \"Research service error. Try again later.\";\n  return trimmed || res.statusText;\n}\n\n/** Get or create workflow agents (research + map + shared block). Uses /api/workflow/agents so both Express and server-nest work. */\nexport async function getAgents(): Promise<AgentIds> {\n  const res = await fetch(`${getBase()}/api/workflow/agents`, {\n    credentials: \"include\",\n  });\n  if (!res.ok) throw new Error(await getErrorMessage(res));\n  return res.json();\n}\n\n/** Send a user message to a workflow agent. Uses /api/workflow/send-message so both Express and server-nest work. Returns Letta response. */\nexport async function sendAgentMessage(\n  agentId: string,\n  content: string\n): Promise<unknown> {\n  const res = await fetch(`${getBase()}/api/workflow/send-message`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    credentials: \"include\",\n    body: JSON.stringify({ agentId, content }),\n  });\n  if (!res.ok) throw new Error(await getErrorMessage(res));\n  return res.json();\n}\n\nexport async function updateResearchBlock(\n  researchBlockId: string,\n  value: string\n): Promise<void> {\n  const res = await fetch(`${getBase()}/api/workflow/update-block`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    credentials: \"include\",\n    body: JSON.stringify({ researchBlockId, value }),\n  });\n  if (!res.ok) throw new Error(await getErrorMessage(res));\n}\n\n/**\n * Extract the last assistant text from a Letta message response.\n * Letta response shape may include messages[], steps[], or similar.\n */\nexport function getLastAssistantContent(response: unknown): string {\n  const r = response as Record<string, unknown>;\n  const messages = (r?.messages as Array<{ role?: string; content?: string }>) ?? (r?.steps as Array<{ role?: string; content?: string }>);\n  if (Array.isArray(messages)) {\n    for (let i = messages.length - 1; i >= 0; i--) {\n      const m = messages[i];\n      if (m?.role === \"assistant\" && typeof m?.content === \"string\") return m.content;\n    }\n  }\n  const content = r?.content ?? r?.output;\n  if (typeof content === \"string\") return content;\n  return \"\";\n}\n\nexport interface MapStateResponse {\n  geoJson: GeoJSON.FeatureCollection;\n  view?: { center: [number, number]; zoom: number };\n}\n\n/** Get current map state (GeoJSON + optional view) from last map agent run. */\nexport async function getMapState(): Promise<MapStateResponse | null> {\n  const res = await fetch(`${getBase()}/api/workflow/map-state`, { credentials: \"include\" });\n  if (!res.ok) return null;\n  const data = await res.json();\n  if (!data?.geoJson?.type || data.geoJson.type !== \"FeatureCollection\") return null;\n  return data as MapStateResponse;\n}\n\n// ==================== Alerts API ====================\n\nexport type AlertFrequency = \"DAILY\" | \"WEEKLY\" | \"BIWEEKLY\" | \"MONTHLY\" | \"MANUAL\";\nexport type AlertProcessingStatus = \"IDLE\" | \"PROCESSING\" | \"COMPLETED\" | \"FAILED\";\n\nexport interface Alert {\n  id: string;\n  query: string;\n  region: string;\n  maxArticles: number;\n  frequency: AlertFrequency;\n  isActive: boolean;\n  processingStatus: AlertProcessingStatus;\n  lastRunAt?: string;\n  nextRunAt?: string;\n  createdAt: string;\n  updatedAt: string;\n  articleCount?: number;\n}\n\nexport interface AlertListItem {\n  id: string;\n  query: string;\n  region: string;\n  frequency: AlertFrequency;\n  isActive: boolean;\n  processingStatus: AlertProcessingStatus;\n  lastRunAt?: string;\n  nextRunAt?: string;\n  articleCount: number;\n  createdAt: string;\n}\n\nexport interface AlertArticle {\n  id: string;\n  url: string;\n  title: string;\n  author?: string;\n  source: string;\n  publishedAt: string;\n  summary?: string;\n  sentiment?: string;\n  locationCount: number;\n  createdAt: string;\n}\n\nexport interface AlertDetail extends Alert {\n  articles: AlertArticle[];\n}\n\nexport interface CreateAlertInput {\n  query: string;\n  region: string;\n  maxArticles?: number;\n  frequency?: AlertFrequency;\n  isActive?: boolean;\n}\n\nexport interface UpdateAlertInput {\n  query?: string;\n  region?: string;\n  maxArticles?: number;\n  frequency?: AlertFrequency;\n  isActive?: boolean;\n}\n\nexport interface GeoJsonFeature {\n  type: \"Feature\";\n  geometry: {\n    type: \"Point\";\n    coordinates: [number, number];\n  };\n  properties: {\n    locationId: string;\n    articleId: string;\n    alertId: string;\n    articleTitle: string;\n    mention: string;\n    mentionType: string;\n    formattedAddress?: string;\n    confidence?: number;\n    articleUrl: string;\n    publishedAt: string;\n  };\n}\n\nexport interface GeoJsonFeatureCollection {\n  type: \"FeatureCollection\";\n  features: GeoJsonFeature[];\n}\n\n/** List all alerts for the current user */\nexport async function listAlerts(): Promise<AlertListItem[]> {\n  const url = `${getBase()}/api/alerts`;\n  console.log(`[API] listAlerts START - url=${url}`);\n  const res = await fetch(url, {\n    credentials: \"include\",\n  });\n  console.log(`[API] listAlerts response - status=${res.status}, ok=${res.ok}`);\n  if (!res.ok) {\n    const errorText = await res.text().catch(() => res.statusText);\n    console.error(`[API] listAlerts FAILED - status=${res.status}, error=${errorText}`);\n    throw new Error(errorText);\n  }\n  const data = await res.json();\n  console.log(`[API] listAlerts SUCCESS - count=${data?.length || 0}, alerts=`, data?.map((a: AlertListItem) => ({ id: a.id, query: a.query, articleCount: a.articleCount })));\n  return data;\n}\n\n/** Get a single alert with its articles */\nexport async function getAlert(alertId: string): Promise<AlertDetail> {\n  const url = `${getBase()}/api/alerts/${alertId}`;\n  console.log(`[API] getAlert START - alertId=${alertId}, url=${url}`);\n  const res = await fetch(url, {\n    credentials: \"include\",\n  });\n  console.log(`[API] getAlert response - status=${res.status}, ok=${res.ok}`);\n  if (!res.ok) {\n    const errorText = await res.text().catch(() => res.statusText);\n    console.error(`[API] getAlert FAILED - alertId=${alertId}, status=${res.status}, error=${errorText}`);\n    throw new Error(errorText);\n  }\n  const data = await res.json();\n  console.log(`[API] getAlert SUCCESS - alertId=${alertId}, query=\"${data.query}\", region=\"${data.region}\", articleCount=${data.articleCount}, articlesReturned=${data.articles?.length || 0}`);\n  if (data.articles && data.articles.length > 0) {\n    console.log(`[API] getAlert ARTICLES SAMPLE:`, data.articles.slice(0, 2).map((a: AlertArticle) => ({ id: a.id, title: a.title, locationCount: a.locationCount })));\n  }\n  return data;\n}\n\n/** Create a new alert */\nexport async function createAlert(input: CreateAlertInput): Promise<Alert> {\n  const url = `${getBase()}/api/alerts`;\n  console.log(`[API] createAlert START - query=\"${input.query}\", region=\"${input.region}\", frequency=${input.frequency || 'MANUAL'}, maxArticles=${input.maxArticles || 20}`);\n  const res = await fetch(url, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    credentials: \"include\",\n    body: JSON.stringify(input),\n  });\n  console.log(`[API] createAlert response - status=${res.status}, ok=${res.ok}`);\n  if (!res.ok) {\n    const errorText = await res.text().catch(() => res.statusText);\n    console.error(`[API] createAlert FAILED - status=${res.status}, error=${errorText}`);\n    throw new Error(errorText);\n  }\n  const data = await res.json();\n  console.log(`[API] createAlert SUCCESS - alertId=${data.id}, query=\"${data.query}\", region=\"${data.region}\"`);\n  return data;\n}\n\n/** Update an existing alert */\nexport async function updateAlert(alertId: string, input: UpdateAlertInput): Promise<Alert> {\n  const res = await fetch(`${getBase()}/api/alerts/${alertId}`, {\n    method: \"PATCH\",\n    headers: { \"Content-Type\": \"application/json\" },\n    credentials: \"include\",\n    body: JSON.stringify(input),\n  });\n  if (!res.ok) throw new Error(await res.text().catch(() => res.statusText));\n  return res.json();\n}\n\n/** Delete an alert */\nexport async function deleteAlert(alertId: string): Promise<{ success: boolean }> {\n  const res = await fetch(`${getBase()}/api/alerts/${alertId}`, {\n    method: \"DELETE\",\n    credentials: \"include\",\n  });\n  if (!res.ok) throw new Error(await res.text().catch(() => res.statusText));\n  return res.json();\n}\n\n/** Manually trigger an alert to run */\nexport async function runAlert(alertId: string): Promise<{ jobId: string; message: string }> {\n  const url = `${getBase()}/api/alerts/${alertId}/run`;\n  console.log(`[API] runAlert START - alertId=${alertId}, url=${url}`);\n  const res = await fetch(url, {\n    method: \"POST\",\n    credentials: \"include\",\n  });\n  console.log(`[API] runAlert response - status=${res.status}, ok=${res.ok}`);\n  if (!res.ok) {\n    const errorText = await res.text().catch(() => res.statusText);\n    console.error(`[API] runAlert FAILED - alertId=${alertId}, status=${res.status}, error=${errorText}`);\n    throw new Error(errorText);\n  }\n  const data = await res.json();\n  console.log(`[API] runAlert SUCCESS - alertId=${alertId}, jobId=${data.jobId}, message=\"${data.message}\"`);\n  return data;\n}\n\n/** Get GeoJSON locations for alerts */\nexport async function getAlertsLocations(alertIds?: string[]): Promise<GeoJsonFeatureCollection> {\n  const params = alertIds?.length ? `?alertIds=${alertIds.join(\",\")}` : \"\";\n  const url = `${getBase()}/api/alerts/locations${params}`;\n  console.log(`[API] getAlertsLocations START - alertIds=${JSON.stringify(alertIds)}, url=${url}`);\n  const res = await fetch(url, {\n    credentials: \"include\",\n  });\n  console.log(`[API] getAlertsLocations response - status=${res.status}, ok=${res.ok}`);\n  if (!res.ok) {\n    const errorText = await res.text().catch(() => res.statusText);\n    console.error(`[API] getAlertsLocations FAILED - status=${res.status}, error=${errorText}`);\n    throw new Error(errorText);\n  }\n  const data = await res.json();\n  console.log(`[API] getAlertsLocations SUCCESS - featureCount=${data.features?.length || 0}, type=${data.type}`);\n  if (data.features && data.features.length > 0) {\n    console.log(`[API] getAlertsLocations SAMPLE FEATURES (first 3):`, data.features.slice(0, 3).map((f: GeoJsonFeature) => ({ mention: f.properties.mention, articleTitle: f.properties.articleTitle, coords: f.geometry.coordinates })));\n  } else {\n    console.warn(`[API] getAlertsLocations WARNING - NO FEATURES RETURNED! This means no map pins will show.`);\n  }\n  return data;\n}\n\nexport interface ChatResponse {\n  response: string;\n  agentId: string;\n}\n\n/** Chat with articles in an alert using an AI agent */\nexport async function chatWithArticles(alertId: string, message: string): Promise<ChatResponse> {\n  const url = `${getBase()}/api/alerts/${alertId}/chat`;\n  console.log(`[API] chatWithArticles START - alertId=${alertId}, messageLength=${message.length}, url=${url}`);\n  console.log(`[API] chatWithArticles body - message=\"${message.substring(0, 100)}${message.length > 100 ? '...' : ''}\"`);\n\n  try {\n    const res = await fetch(url, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      credentials: \"include\",\n      body: JSON.stringify({ message }),\n    });\n\n    console.log(`[API] chatWithArticles response received - status=${res.status}, ok=${res.ok}, contentType=${res.headers.get('content-type')}`);\n\n    if (!res.ok) {\n      const errorText = await res.text().catch(() => res.statusText);\n      console.error(`[API] chatWithArticles FAILED - alertId=${alertId}, status=${res.status}, error=\"${errorText.substring(0, 200)}\"`);\n      throw new Error(errorText);\n    }\n\n    const data = await res.json();\n    console.log(`[API] chatWithArticles SUCCESS - alertId=${alertId}, agentId=${data.agentId}, responseLength=${data.response?.length || 0}`);\n    console.log(`[API] chatWithArticles response preview - \"${data.response?.substring(0, 150)}${data.response?.length > 150 ? '...' : ''}\"`);\n\n    return data;\n  } catch (error) {\n    console.error(`[API] chatWithArticles ERROR - alertId=${alertId}, error=${error instanceof Error ? error.message : String(error)}`);\n    throw error;\n  }\n}\n\n// ==================== User Preferences API ====================\n\nexport interface UserPreferences {\n  id: string;\n  defaultLat?: number;\n  defaultLng?: number;\n  defaultZoom?: number;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface UpdatePreferencesInput {\n  defaultLat?: number;\n  defaultLng?: number;\n  defaultZoom?: number;\n}\n\n/** Get user preferences */\nexport async function getPreferences(): Promise<UserPreferences> {\n  const res = await fetch(`${getBase()}/api/preferences`, {\n    credentials: \"include\",\n  });\n  if (!res.ok) throw new Error(await res.text().catch(() => res.statusText));\n  return res.json();\n}\n\n/** Update user preferences */\nexport async function updatePreferences(input: UpdatePreferencesInput): Promise<UserPreferences> {\n  const res = await fetch(`${getBase()}/api/preferences`, {\n    method: \"PATCH\",\n    headers: { \"Content-Type\": \"application/json\" },\n    credentials: \"include\",\n    body: JSON.stringify(input),\n  });\n  if (!res.ok) throw new Error(await res.text().catch(() => res.statusText));\n  return res.json();\n}\n\n/** Reset user preferences to defaults */\nexport async function resetPreferences(): Promise<{ success: boolean }> {\n  const res = await fetch(`${getBase()}/api/preferences`, {\n    method: \"DELETE\",\n    credentials: \"include\",\n  });\n  if (!res.ok) throw new Error(await res.text().catch(() => res.statusText));\n  return res.json();\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1245, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/AgentInput.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useCallback } from \"react\";\nimport { useSpeechRecognition } from \"@/hooks/useSpeechRecognition\";\nimport { useSpeechSynthesis } from \"@/hooks/useSpeechSynthesis\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  getAgents,\n  sendAgentMessage,\n  updateResearchBlock,\n  getLastAssistantContent,\n  chatWithArticles,\n  type AgentIds,\n} from \"@/lib/api\";\nimport { cn } from \"@/lib/utils\";\nimport { Search, FileText, Mic, MicOff, Volume2, MessageSquare } from \"lucide-react\";\n\nconst MAP_PROMPT =\n  \"Update the map using the research in your context. Add layers for any places or routes mentioned.\";\n\nexport function AgentInput({\n  className,\n  selectedAlertId,\n  onAfterMapAgentResponse,\n}: {\n  className?: string;\n  /** When set, chat messages are routed to the article chat endpoint instead of workflow agents. */\n  selectedAlertId?: string | null;\n  /** Called after map agent responds so the client can refetch map state and update the map. */\n  onAfterMapAgentResponse?: () => Promise<void>;\n}) {\n  const [agents, setAgents] = useState<AgentIds | null>(null);\n  const [askInput, setAskInput] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [lastResponse, setLastResponse] = useState(\"\");\n  const [error, setError] = useState<string | null>(null);\n\n  const { speak: speakText } = useSpeechSynthesis();\n  const {\n    isSupported: sttSupported,\n    isListening,\n    transcript,\n    interimTranscript,\n    error: sttError,\n    start: startListening,\n    stop: stopListening,\n    reset: resetTranscript,\n  } = useSpeechRecognition({ continuous: true });\n\n  const ensureAgents = useCallback(async (): Promise<AgentIds> => {\n    if (agents) return agents;\n    const ids = await getAgents();\n    setAgents(ids);\n    return ids;\n  }, [agents]);\n\n  const submitMessage = useCallback(\n    async (userText: string) => {\n      const text = userText.trim();\n      if (!text) return;\n      setLoading(true);\n      setError(null);\n      setLastResponse(\"\");\n      try {\n        // If an alert is selected, use article chat instead of workflow agents\n        if (selectedAlertId) {\n          console.log(`[AgentInput] Using article chat for alert ${selectedAlertId}`);\n          const response = await chatWithArticles(selectedAlertId, text);\n          setLastResponse(response.response);\n          return;\n        }\n\n        // Otherwise use the standard research workflow\n        const ids = await ensureAgents();\n        const researchResponse = await sendAgentMessage(ids.researchAgentId, text);\n        const researchContent = getLastAssistantContent(researchResponse);\n        if (researchContent) {\n          await updateResearchBlock(ids.researchBlockId, researchContent);\n          const mapResponse = await sendAgentMessage(ids.mapAgentId, MAP_PROMPT);\n          const mapContent = getLastAssistantContent(mapResponse);\n          setLastResponse(mapContent || researchContent);\n          await onAfterMapAgentResponse?.();\n        } else {\n          setLastResponse(getLastAssistantContent(researchResponse) || \"No reply from research agent.\");\n        }\n      } catch (e) {\n        setError(e instanceof Error ? e.message : String(e));\n      } finally {\n        setLoading(false);\n      }\n    },\n    [ensureAgents, onAfterMapAgentResponse, selectedAlertId]\n  );\n\n  const handleAskSubmit = () => {\n    submitMessage(askInput);\n    setAskInput(\"\");\n  };\n\n  const handleToggleMic = () => {\n    if (isListening) {\n      stopListening();\n      const full = (transcript + \" \" + interimTranscript).trim();\n      if (full) {\n        setAskInput(full);\n        submitMessage(full);\n      }\n    } else {\n      resetTranscript();\n      setAskInput(\"\");\n      startListening();\n    }\n  };\n\n  const liveTranscript = (transcript + \" \" + interimTranscript).trim();\n  const showMic = sttSupported !== false; // show slot when unknown or supported (avoids layout shift)\n  const micReady = sttSupported === true;\n  const isArticleChatMode = !!selectedAlertId;\n\n  return (\n    <div className={cn(\"space-y-6\", className)}>\n      {/* Research query bar: text + voice in one row */}\n      <section className=\"space-y-2\" aria-label=\"Research query\">\n        <label htmlFor=\"ask-input\" className=\"sr-only\">\n          Ask a research question\n        </label>\n        <div className=\"flex flex-wrap gap-2 sm:flex-nowrap\">\n          <div className=\"relative flex-1\">\n            <Search\n              className=\"pointer-events-none absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground\"\n              aria-hidden\n            />\n            <Input\n              id=\"ask-input\"\n              type=\"text\"\n              placeholder={\n                isListening\n                  ? (liveTranscript || \"Listening\")\n                  : isArticleChatMode\n                    ? \"Ask about the selected alert's articles\"\n                    : \"Search events, places, or ask a question\"\n              }\n              value={askInput}\n              onChange={(e) => setAskInput(e.target.value)}\n              onKeyDown={(e) => e.key === \"Enter\" && handleAskSubmit()}\n              disabled={loading || isListening}\n              className=\"min-h-[48px] touch-manipulation pl-9 text-base shadow-sm sm:min-h-[52px] sm:pl-10 sm:text-base\"\n              aria-describedby={showMic ? \"ask-mic-hint\" : undefined}\n              aria-live={isListening ? \"polite\" : undefined}\n              aria-atomic={isListening}\n            />\n          </div>\n          {showMic && (\n            <Button\n              type=\"button\"\n              variant={isListening ? \"destructive\" : \"outline\"}\n              size=\"icon\"\n              className=\"min-h-[48px] min-w-[48px] shrink-0 touch-manipulation sm:min-h-[52px] sm:min-w-[52px]\"\n              onClick={handleToggleMic}\n              disabled={loading || !micReady}\n              aria-label={\n                !micReady\n                  ? \"Voice input loading\"\n                  : isListening\n                    ? \"Stop listening and send\"\n                    : \"Speak your question\"\n              }\n              aria-pressed={isListening}\n              aria-busy={!micReady}\n            >\n              {isListening ? <MicOff className=\"size-4\" aria-hidden /> : <Mic className=\"size-4\" aria-hidden />}\n            </Button>\n          )}\n          <Button\n            type=\"button\"\n            onClick={handleAskSubmit}\n            disabled={loading || !askInput.trim()}\n            className=\"min-h-[48px] shrink-0 touch-manipulation px-5 sm:min-h-[52px]\"\n          >\n            {loading\n              ? (isArticleChatMode ? \"Chatting\" : \"Researching\")\n              : (isArticleChatMode ? (\n                  <>\n                    <MessageSquare className=\"size-4 mr-1.5\" aria-hidden />\n                    Chat\n                  </>\n                ) : \"Research\")}\n          </Button>\n        </div>\n        {showMic && micReady && (\n          <p id=\"ask-mic-hint\" className=\"text-xs text-muted-foreground\">\n            {isListening ? \"Tap the mic again to stop and send.\" : \"Use the mic to speak your question.\"}\n          </p>\n        )}\n        {sttError && (\n          <p className=\"text-xs text-destructive\" role=\"alert\">\n            {sttError}\n          </p>\n        )}\n      </section>\n\n      {error && (\n        <div\n          className=\"rounded-lg border border-destructive/30 bg-destructive/5 px-4 py-3 text-sm text-destructive\"\n          role=\"alert\"\n        >\n          {error}\n        </div>\n      )}\n\n      {lastResponse && (\n        <section\n          className=\"rounded-xl border border-border bg-card px-4 py-4 shadow-sm sm:px-5 sm:py-5\"\n          aria-label={isArticleChatMode ? \"Chat Response\" : \"Findings\"}\n        >\n          <div className=\"mb-3 flex flex-wrap items-center justify-between gap-2\">\n            <div className=\"flex items-center gap-2 text-sm font-medium text-foreground\">\n              {isArticleChatMode ? (\n                <MessageSquare className=\"size-4 shrink-0 text-muted-foreground\" aria-hidden />\n              ) : (\n                <FileText className=\"size-4 shrink-0 text-muted-foreground\" aria-hidden />\n              )}\n              {isArticleChatMode ? \"Chat Response\" : \"Findings\"}\n            </div>\n            <Button\n              type=\"button\"\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"h-8 gap-1.5 text-muted-foreground hover:text-foreground\"\n              onClick={() => speakText(lastResponse)}\n              aria-label=\"Speak findings aloud\"\n            >\n              <Volume2 className=\"size-4\" aria-hidden />\n              Speak\n            </Button>\n          </div>\n          <p className=\"whitespace-pre-wrap text-sm leading-relaxed text-foreground/90\">{lastResponse}</p>\n        </section>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1600, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/auth/ProtectedRoute.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useAuth } from \"@/contexts/AuthContext\";\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nexport function ProtectedRoute({ children }: ProtectedRouteProps) {\n  const { user, loading } = useAuth();\n  const router = useRouter();\n\n  useEffect(() => {\n    if (!loading && !user) {\n      router.replace(\"/login\");\n    }\n  }, [user, loading, router]);\n\n  // Show loading state while checking auth (inherits bg-background from layout)\n  if (loading) {\n    return (\n      <div className=\"flex min-h-screen min-h-[100dvh] items-center justify-center bg-background\">\n        <div className=\"text-muted-foreground\">Loading...</div>\n      </div>\n    );\n  }\n\n  // Don't render children if not authenticated\n  if (!user) {\n    return null;\n  }\n\n  return <>{children}</>;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAUO,SAAS,eAAe,EAAE,QAAQ,EAAuB;;IAC9D,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,mLAAO;IACjC,MAAM,SAAS,IAAA,wLAAS;IAExB,IAAA,gNAAS;oCAAC;YACR,IAAI,CAAC,WAAW,CAAC,MAAM;gBACrB,OAAO,OAAO,CAAC;YACjB;QACF;mCAAG;QAAC;QAAM;QAAS;KAAO;IAE1B,8EAA8E;IAC9E,IAAI,SAAS;QACX,qBACE,mOAAC;YAAI,WAAU;sBACb,cAAA,mOAAC;gBAAI,WAAU;0BAAwB;;;;;;;;;;;IAG7C;IAEA,6CAA6C;IAC7C,IAAI,CAAC,MAAM;QACT,OAAO;IACT;IAEA,qBAAO;kBAAG;;AACZ;GAzBgB;;QACY,mLAAO;QAClB,wLAAS;;;KAFV"}},
    {"offset": {"line": 1671, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/auth/UserHeader.tsx"],"sourcesContent":["\"use client\";\n\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { Button } from \"@/components/ui/button\";\n\nexport function UserHeader() {\n  const { user, logout, loading } = useAuth();\n\n  if (!user) return null;\n\n  return (\n    <header className=\"border-b border-border bg-card px-4 py-3\">\n      <div className=\"mx-auto flex max-w-2xl items-center justify-between\">\n        <span className=\"text-sm text-muted-foreground\">\n          Signed in as{\" \"}\n          <span className=\"font-medium text-foreground\">\n            {user.email}\n          </span>\n        </span>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={logout}\n          disabled={loading}\n        >\n          Sign out\n        </Button>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKO,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,mLAAO;IAEzC,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,mOAAC;QAAO,WAAU;kBAChB,cAAA,mOAAC;YAAI,WAAU;;8BACb,mOAAC;oBAAK,WAAU;;wBAAgC;wBACjC;sCACb,mOAAC;4BAAK,WAAU;sCACb,KAAK,KAAK;;;;;;;;;;;;8BAGf,mOAAC,qLAAM;oBACL,SAAQ;oBACR,MAAK;oBACL,SAAS;oBACT,UAAU;8BACX;;;;;;;;;;;;;;;;;AAMT;GAzBgB;;QACoB,mLAAO;;;KAD3B"}},
    {"offset": {"line": 1749, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/auth/index.ts"],"sourcesContent":["export { ProtectedRoute } from \"./ProtectedRoute\";\nexport { UserHeader } from \"./UserHeader\";\n"],"names":[],"mappings":";AAAA;AACA"}},
    {"offset": {"line": 1761, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/ui/calendar.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        month_caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        button_previous: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 absolute left-1\"\n        ),\n        button_next: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 absolute right-1\"\n        ),\n        month_grid: \"w-full border-collapse space-y-1\",\n        weekdays: \"flex\",\n        weekday:\n          \"text-zinc-500 rounded-md w-9 font-normal text-[0.8rem] dark:text-zinc-400\",\n        week: \"flex w-full mt-2\",\n        day: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-zinc-100/50 [&:has([aria-selected])]:bg-zinc-100 first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20 dark:[&:has([aria-selected].day-outside)]:bg-zinc-800/50 dark:[&:has([aria-selected])]:bg-zinc-800\",\n        day_button: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        range_end: \"day-range-end\",\n        selected:\n          \"bg-zinc-900 text-zinc-50 hover:bg-zinc-900 hover:text-zinc-50 focus:bg-zinc-900 focus:text-zinc-50 dark:bg-zinc-50 dark:text-zinc-900 dark:hover:bg-zinc-50 dark:hover:text-zinc-900 dark:focus:bg-zinc-50 dark:focus:text-zinc-900\",\n        today: \"bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-50\",\n        outside:\n          \"day-outside text-zinc-500 aria-selected:bg-zinc-100/50 aria-selected:text-zinc-500 dark:text-zinc-400 dark:aria-selected:bg-zinc-800/50 dark:aria-selected:text-zinc-400\",\n        disabled: \"text-zinc-500 opacity-50 dark:text-zinc-400\",\n        range_middle:\n          \"aria-selected:bg-zinc-100 aria-selected:text-zinc-900 dark:aria-selected:bg-zinc-800 dark:aria-selected:text-zinc-50\",\n        hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        Chevron: ({ orientation }) => {\n          const Icon = orientation === \"left\" ? ChevronLeft : ChevronRight\n          return <Icon className=\"h-4 w-4\" />\n        },\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AACA;AAEA;AACA;AAPA;;;;;;AAWA,SAAS,SAAS,EAChB,SAAS,EACT,UAAU,EACV,kBAAkB,IAAI,EACtB,GAAG,OACW;IACd,qBACE,mOAAC,wNAAS;QACR,iBAAiB;QACjB,WAAW,IAAA,kKAAE,EAAC,OAAO;QACrB,YAAY;YACV,QAAQ;YACR,OAAO;YACP,eAAe;YACf,eAAe;YACf,KAAK;YACL,iBAAiB,IAAA,kKAAE,EACjB,IAAA,6LAAc,EAAC;gBAAE,SAAS;YAAU,IACpC;YAEF,aAAa,IAAA,kKAAE,EACb,IAAA,6LAAc,EAAC;gBAAE,SAAS;YAAU,IACpC;YAEF,YAAY;YACZ,UAAU;YACV,SACE;YACF,MAAM;YACN,KAAK;YACL,YAAY,IAAA,kKAAE,EACZ,IAAA,6LAAc,EAAC;gBAAE,SAAS;YAAQ,IAClC;YAEF,WAAW;YACX,UACE;YACF,OAAO;YACP,SACE;YACF,UAAU;YACV,cACE;YACF,QAAQ;YACR,GAAG,UAAU;QACf;QACA,YAAY;YACV,SAAS,CAAC,EAAE,WAAW,EAAE;gBACvB,MAAM,OAAO,gBAAgB,SAAS,4QAAW,GAAG,+QAAY;gBAChE,qBAAO,mOAAC;oBAAK,WAAU;;;;;;YACzB;QACF;QACC,GAAG,KAAK;;;;;;AAGf;KAvDS;AAwDT,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 1841, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/ui/popover.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border border-zinc-200 bg-white p-4 text-zinc-950 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,UAAU,oNAAqB;AAErC,MAAM,iBAAiB,uNAAwB;AAE/C,MAAM,+BAAiB,iNAAgB,MAGrC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC5D,mOAAC,sNAAuB;kBACtB,cAAA,mOAAC,uNAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,kKAAE,EACX,0eACA;YAED,GAAG,KAAK;;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,uNAAwB,CAAC,WAAW"}},
    {"offset": {"line": 1890, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-zinc-950 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 dark:border-zinc-800 dark:bg-zinc-950 dark:ring-offset-zinc-950 dark:placeholder:text-zinc-400 dark:focus:ring-zinc-300\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-zinc-200 bg-white text-zinc-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-zinc-100 dark:bg-zinc-800\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,mNAAoB;AAEnC,MAAM,cAAc,oNAAqB;AAEzC,MAAM,cAAc,oNAAqB;AAEzC,MAAM,8BAAgB,iNAAgB,MAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,mOAAC,sNAAuB;QACtB,KAAK;QACL,WAAW,IAAA,kKAAE,EACX,gaACA;QAED,GAAG,KAAK;;YAER;0BACD,mOAAC,mNAAoB;gBAAC,OAAO;0BAC3B,cAAA,mOAAC,4QAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,sNAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,iNAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mOAAC,6NAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,kKAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,mOAAC,sQAAS;YAAC,WAAU;;;;;;;;;;;MAZnB;AAeN,qBAAqB,WAAW,GAAG,6NAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,iNAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mOAAC,+NAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,kKAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,mOAAC,4QAAW;YAAC,WAAU;;;;;;;;;;;MAZrB;AAeN,uBAAuB,WAAW,GAChC,+NAAgC,CAAC,WAAW;AAE9C,MAAM,8BAAgB,iNAAgB,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,mOAAC,qNAAsB;kBACrB,cAAA,mOAAC,sNAAuB;YACtB,KAAK;YACL,WAAW,IAAA,kKAAE,EACX,mgBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,mOAAC;;;;;8BACD,mOAAC,uNAAwB;oBACvB,WAAW,IAAA,kKAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,mOAAC;;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,sNAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,iNAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mOAAC,oNAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kKAAE,EAAC,0CAA0C;QACvD,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,oNAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,iNAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,mOAAC,mNAAoB;QACnB,KAAK;QACL,WAAW,IAAA,kKAAE,EACX,qQACA;QAED,GAAG,KAAK;;0BAET,mOAAC;gBAAK,WAAU;0BACd,cAAA,mOAAC,4NAA6B;8BAC5B,cAAA,mOAAC,sPAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAIrB,mOAAC,uNAAwB;0BAAE;;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,mNAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,iNAAgB,QAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mOAAC,wNAAyB;QACxB,KAAK;QACL,WAAW,IAAA,kKAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG,wNAAyB,CAAC,WAAW"}},
    {"offset": {"line": 2113, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,IAAA,gNAAG,EACvB;AAGF,MAAM,sBAAQ,iNAAgB,MAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mOAAC,kNAAmB;QAClB,KAAK;QACL,WAAW,IAAA,kKAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG,kNAAmB,CAAC,WAAW"}},
    {"offset": {"line": 2151, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/ui/form.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  ControllerProps,\n  FieldPath,\n  FieldValues,\n  FormProvider,\n  useFormContext,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-red-500 dark:text-red-900\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-zinc-500 dark:text-zinc-400\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message) : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-red-500 dark:text-red-900\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2375, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/lib/validations/alert.ts"],"sourcesContent":["import { z } from 'zod';\n\nexport const alertFrequencySchema = z.enum(['DAILY', 'WEEKLY', 'BIWEEKLY', 'MONTHLY', 'MANUAL']);\n\nexport type AlertFrequency = z.infer<typeof alertFrequencySchema>;\n\nexport const createAlertSchema = z.object({\n  query: z.string().min(2, 'Query must be at least 2 characters'),\n  region: z.string().min(2, 'Region is required'),\n  maxArticles: z.number().min(1, 'At least 1 article').max(50, 'Maximum 50 articles'),\n  frequency: alertFrequencySchema,\n  fromDate: z.date().optional(),\n});\n\nexport type CreateAlertFormData = z.infer<typeof createAlertSchema>;\n\nexport const FREQUENCY_OPTIONS: { value: AlertFrequency; label: string }[] = [\n  { value: 'MANUAL', label: 'Manual only' },\n  { value: 'DAILY', label: 'Daily' },\n  { value: 'WEEKLY', label: 'Weekly' },\n  { value: 'BIWEEKLY', label: 'Biweekly' },\n  { value: 'MONTHLY', label: 'Monthly' },\n];\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEO,MAAM,uBAAuB,2NAAC,CAAC,IAAI,CAAC;IAAC;IAAS;IAAU;IAAY;IAAW;CAAS;AAIxF,MAAM,oBAAoB,2NAAC,CAAC,MAAM,CAAC;IACxC,OAAO,2NAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACzB,QAAQ,2NAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC1B,aAAa,2NAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,sBAAsB,GAAG,CAAC,IAAI;IAC7D,WAAW;IACX,UAAU,2NAAC,CAAC,IAAI,GAAG,QAAQ;AAC7B;AAIO,MAAM,oBAAgE;IAC3E;QAAE,OAAO;QAAU,OAAO;IAAc;IACxC;QAAE,OAAO;QAAS,OAAO;IAAQ;IACjC;QAAE,OAAO;QAAU,OAAO;IAAS;IACnC;QAAE,OAAO;QAAY,OAAO;IAAW;IACvC;QAAE,OAAO;QAAW,OAAO;IAAU;CACtC"}},
    {"offset": {"line": 2428, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/alerts/CreateAlertForm.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { format } from 'date-fns';\nimport { CalendarIcon } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Calendar } from '@/components/ui/calendar';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport { createAlert, type CreateAlertInput } from '@/lib/api';\nimport {\n  createAlertSchema,\n  type CreateAlertFormData,\n  FREQUENCY_OPTIONS,\n} from '@/lib/validations/alert';\nimport { cn } from '@/lib/utils';\n\ninterface CreateAlertFormProps {\n  onCreated: () => void;\n  onCancel: () => void;\n}\n\nexport function CreateAlertForm({ onCreated, onCancel }: CreateAlertFormProps) {\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const form = useForm<CreateAlertFormData>({\n    resolver: zodResolver(createAlertSchema),\n    defaultValues: {\n      query: '',\n      region: '',\n      maxArticles: 20,\n      frequency: 'MANUAL',\n      fromDate: undefined,\n    },\n  });\n\n  const onSubmit = async (data: CreateAlertFormData) => {\n    console.log(`[FORM] CreateAlertForm onSubmit START - query=\"${data.query}\", region=\"${data.region}\", frequency=${data.frequency}, maxArticles=${data.maxArticles}`);\n    setError(null);\n    setSubmitting(true);\n\n    try {\n      const input: CreateAlertInput = {\n        query: data.query.trim(),\n        region: data.region.trim(),\n        maxArticles: data.maxArticles,\n        frequency: data.frequency,\n        isActive: true,\n      };\n      console.log(`[FORM] CreateAlertForm submitting - input=`, input);\n      await createAlert(input);\n      console.log(`[FORM] CreateAlertForm SUCCESS`);\n      onCreated();\n    } catch (err) {\n      const errorMsg = err instanceof Error ? err.message : 'Failed to create alert';\n      console.error(`[FORM] CreateAlertForm FAILED - error=${errorMsg}`);\n      setError(errorMsg);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n        <FormField\n          control={form.control}\n          name=\"query\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Search Query</FormLabel>\n              <FormControl>\n                <Input\n                  placeholder=\"e.g., robberies, car accidents\"\n                  disabled={submitting}\n                  {...field}\n                />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"region\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Region</FormLabel>\n              <FormControl>\n                <Input\n                  placeholder=\"e.g., Savannah, GA\"\n                  disabled={submitting}\n                  {...field}\n                />\n              </FormControl>\n              <FormDescription>\n                City, state, or area to search for news\n              </FormDescription>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <div className=\"grid grid-cols-2 gap-4\">\n          <FormField\n            control={form.control}\n            name=\"maxArticles\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Max Articles</FormLabel>\n                <FormControl>\n                  <Input\n                    type=\"number\"\n                    min={1}\n                    max={50}\n                    disabled={submitting}\n                    {...field}\n                    onChange={(e) => field.onChange(parseInt(e.target.value) || 20)}\n                  />\n                </FormControl>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n\n          <FormField\n            control={form.control}\n            name=\"frequency\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Frequency</FormLabel>\n                <Select\n                  disabled={submitting}\n                  onValueChange={field.onChange}\n                  defaultValue={field.value}\n                >\n                  <FormControl>\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Select frequency\" />\n                    </SelectTrigger>\n                  </FormControl>\n                  <SelectContent>\n                    {FREQUENCY_OPTIONS.map((option) => (\n                      <SelectItem key={option.value} value={option.value}>\n                        {option.label}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n        </div>\n\n        <FormField\n          control={form.control}\n          name=\"fromDate\"\n          render={({ field }) => (\n            <FormItem className=\"flex flex-col\">\n              <FormLabel>Initial Search Period</FormLabel>\n              <Popover>\n                <PopoverTrigger asChild>\n                  <FormControl>\n                    <Button\n                      variant=\"outline\"\n                      disabled={submitting}\n                      className={cn(\n                        'w-full pl-3 text-left font-normal',\n                        !field.value && 'text-muted-foreground'\n                      )}\n                    >\n                      {field.value ? (\n                        format(field.value, 'PPP')\n                      ) : (\n                        <span>Pick a start date (optional)</span>\n                      )}\n                      <CalendarIcon className=\"ml-auto h-4 w-4 opacity-50\" />\n                    </Button>\n                  </FormControl>\n                </PopoverTrigger>\n                <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                  <Calendar\n                    mode=\"single\"\n                    selected={field.value}\n                    onSelect={field.onChange}\n                    disabled={(date) => date > new Date()}\n                    initialFocus\n                  />\n                </PopoverContent>\n              </Popover>\n              <FormDescription>\n                Search for articles from this date. Defaults to today.\n              </FormDescription>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        {error && (\n          <div className=\"text-sm text-red-600 dark:text-red-400\">{error}</div>\n        )}\n\n        <div className=\"flex gap-3 justify-end pt-2\">\n          <Button type=\"button\" variant=\"outline\" onClick={onCancel} disabled={submitting}>\n            Cancel\n          </Button>\n          <Button type=\"submit\" disabled={submitting}>\n            {submitting ? 'Creating...' : 'Create Alert'}\n          </Button>\n        </div>\n      </form>\n    </Form>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2893, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-zinc-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:border-zinc-800 dark:bg-zinc-950\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-zinc-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-zinc-100 data-[state=open]:text-zinc-500 dark:ring-offset-zinc-950 dark:focus:ring-zinc-300 dark:data-[state=open]:bg-zinc-800 dark:data-[state=open]:text-zinc-400\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-zinc-500 dark:text-zinc-400\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,mNAAoB;AAEnC,MAAM,gBAAgB,sNAAuB;AAE7C,MAAM,eAAe,qNAAsB;AAE3C,MAAM,cAAc,oNAAqB;AAEzC,MAAM,8BAAgB,iNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mOAAC,sNAAuB;QACtB,KAAK;QACL,WAAW,IAAA,kKAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;KAVP;AAaN,cAAc,WAAW,GAAG,sNAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,iNAAgB,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,mOAAC;;0BACC,mOAAC;;;;;0BACD,mOAAC,sNAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,kKAAE,EACX,gjBACA;gBAED,GAAG,KAAK;;oBAER;kCACD,mOAAC,oNAAqB;wBAAC,WAAU;;0CAC/B,mOAAC,0OAAC;gCAAC,WAAU;;;;;;0CACb,mOAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,sNAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,mOAAC;QACC,WAAW,IAAA,kKAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,mOAAC;QACC,WAAW,IAAA,kKAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,iNAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mOAAC,oNAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kKAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,oNAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,iNAAgB,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mOAAC,0NAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,kKAAE,EAAC,4CAA4C;QACzD,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,0NAA2B,CAAC,WAAW"}},
    {"offset": {"line": 3052, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/alerts/CreateAlertDialog.tsx"],"sourcesContent":["'use client';\n\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { CreateAlertForm } from './CreateAlertForm';\n\ninterface CreateAlertDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onCreated: () => void;\n}\n\nexport function CreateAlertDialog({ open, onOpenChange, onCreated }: CreateAlertDialogProps) {\n  const handleCreated = () => {\n    onOpenChange(false);\n    onCreated();\n  };\n\n  const handleCancel = () => {\n    onOpenChange(false);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[425px]\">\n        <DialogHeader>\n          <DialogTitle>Create News Alert</DialogTitle>\n          <DialogDescription>\n            Set up a recurring search for news articles in a specific region.\n          </DialogDescription>\n        </DialogHeader>\n        <CreateAlertForm onCreated={handleCreated} onCancel={handleCancel} />\n      </DialogContent>\n    </Dialog>\n  );\n}\n\ninterface CreateAlertDialogTriggerProps {\n  onOpenChange: (open: boolean) => void;\n}\n\nexport function CreateAlertDialogTrigger({ onOpenChange }: CreateAlertDialogTriggerProps) {\n  return (\n    <Button onClick={() => onOpenChange(true)} size=\"sm\">\n      New Alert\n    </Button>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AAOA;AACA;AAVA;;;;;AAkBO,SAAS,kBAAkB,EAAE,IAAI,EAAE,YAAY,EAAE,SAAS,EAA0B;IACzF,MAAM,gBAAgB;QACpB,aAAa;QACb;IACF;IAEA,MAAM,eAAe;QACnB,aAAa;IACf;IAEA,qBACE,mOAAC,qLAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,mOAAC,4LAAa;YAAC,WAAU;;8BACvB,mOAAC,2LAAY;;sCACX,mOAAC,0LAAW;sCAAC;;;;;;sCACb,mOAAC,gMAAiB;sCAAC;;;;;;;;;;;;8BAIrB,mOAAC,2MAAe;oBAAC,WAAW;oBAAe,UAAU;;;;;;;;;;;;;;;;;AAI7D;KAvBgB;AA6BT,SAAS,yBAAyB,EAAE,YAAY,EAAiC;IACtF,qBACE,mOAAC,qLAAM;QAAC,SAAS,IAAM,aAAa;QAAO,MAAK;kBAAK;;;;;;AAIzD;MANgB"}},
    {"offset": {"line": 3146, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,mOAAC;QACC,aAAU;QACV,WAAW,IAAA,kKAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,mOAAC;QACC,aAAU;QACV,WAAW,IAAA,kKAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,mOAAC;QACC,aAAU;QACV,WAAW,IAAA,kKAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,mOAAC;QACC,aAAU;QACV,WAAW,IAAA,kKAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,mOAAC;QACC,aAAU;QACV,WAAW,IAAA,kKAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,mOAAC;QACC,aAAU;QACV,WAAW,IAAA,kKAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,mOAAC;QACC,aAAU;QACV,WAAW,IAAA,kKAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 3266, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/alerts/AlertList.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport {\n  type AlertListItem,\n  updateAlert,\n  deleteAlert,\n  runAlert,\n} from '@/lib/api';\n\ninterface AlertListProps {\n  alerts: AlertListItem[];\n  onRefresh: () => void;\n  onSelect: (alertId: string) => void;\n}\n\nfunction formatDate(dateStr?: string): string {\n  if (!dateStr) return 'Never';\n  return new Date(dateStr).toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n    hour: 'numeric',\n    minute: '2-digit',\n  });\n}\n\nfunction formatFrequency(freq: string): string {\n  const map: Record<string, string> = {\n    DAILY: 'Daily',\n    WEEKLY: 'Weekly',\n    BIWEEKLY: 'Biweekly',\n    MONTHLY: 'Monthly',\n    MANUAL: 'Manual',\n  };\n  return map[freq] || freq;\n}\n\nexport function AlertList({ alerts, onRefresh, onSelect }: AlertListProps) {\n  const [loadingId, setLoadingId] = useState<string | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleToggle = async (alert: AlertListItem) => {\n    setLoadingId(alert.id);\n    setError(null);\n    try {\n      await updateAlert(alert.id, { isActive: !alert.isActive });\n      onRefresh();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to update alert');\n    } finally {\n      setLoadingId(null);\n    }\n  };\n\n  const handleDelete = async (alertId: string) => {\n    if (!confirm('Are you sure you want to delete this alert? All associated articles will be deleted.')) {\n      return;\n    }\n    setLoadingId(alertId);\n    setError(null);\n    try {\n      await deleteAlert(alertId);\n      onRefresh();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to delete alert');\n    } finally {\n      setLoadingId(null);\n    }\n  };\n\n  const handleRun = async (alertId: string) => {\n    setLoadingId(alertId);\n    setError(null);\n    try {\n      await runAlert(alertId);\n      // Refresh after a short delay to show updated status\n      setTimeout(onRefresh, 1000);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to run alert');\n    } finally {\n      setLoadingId(null);\n    }\n  };\n\n  if (alerts.length === 0) {\n    return (\n      <div className=\"text-center py-8 text-zinc-500 dark:text-zinc-400\">\n        No alerts yet. Create one to get started.\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-3\">\n      {error && (\n        <div className=\"text-sm text-red-600 dark:text-red-400 mb-2\">{error}</div>\n      )}\n      {alerts.map((alert) => (\n        <Card\n          key={alert.id}\n          className={`cursor-pointer transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900 ${\n            !alert.isActive ? 'opacity-60' : ''\n          }`}\n        >\n          <CardHeader className=\"pb-2\">\n            <div className=\"flex items-start justify-between\">\n              <CardTitle\n                className=\"text-base font-medium cursor-pointer hover:text-blue-600 dark:hover:text-blue-400\"\n                onClick={() => onSelect(alert.id)}\n              >\n                {alert.query}\n              </CardTitle>\n              <div className=\"flex items-center gap-1\">\n                <span\n                  className={`text-xs px-2 py-0.5 rounded-full ${\n                    alert.isActive\n                      ? 'bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300'\n                      : 'bg-zinc-100 text-zinc-600 dark:bg-zinc-800 dark:text-zinc-400'\n                  }`}\n                >\n                  {alert.isActive ? 'Active' : 'Paused'}\n                </span>\n              </div>\n            </div>\n          </CardHeader>\n          <CardContent className=\"pt-0\">\n            <div className=\"text-sm text-zinc-600 dark:text-zinc-400 mb-3\">\n              <span className=\"font-medium\">{alert.region}</span>\n              <span className=\"mx-2\"></span>\n              <span>{formatFrequency(alert.frequency)}</span>\n              <span className=\"mx-2\"></span>\n              <span>{alert.articleCount} articles</span>\n            </div>\n            <div className=\"text-xs text-zinc-500 dark:text-zinc-500 mb-3\">\n              Last run: {formatDate(alert.lastRunAt)}\n              {alert.nextRunAt && alert.isActive && (\n                <>\n                  <span className=\"mx-2\"></span>\n                  Next: {formatDate(alert.nextRunAt)}\n                </>\n              )}\n            </div>\n            <div className=\"flex gap-2\">\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={() => handleRun(alert.id)}\n                disabled={loadingId === alert.id}\n              >\n                Run Now\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"ghost\"\n                onClick={() => handleToggle(alert)}\n                disabled={loadingId === alert.id}\n              >\n                {alert.isActive ? 'Pause' : 'Resume'}\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"ghost\"\n                className=\"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-950\"\n                onClick={() => handleDelete(alert.id)}\n                disabled={loadingId === alert.id}\n              >\n                Delete\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      ))}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3563, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/alerts/AlertDetail.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport {\n  type AlertDetail as AlertDetailType,\n  type AlertFrequency,\n  getAlert,\n  updateAlert,\n  runAlert,\n} from '@/lib/api';\n\ninterface AlertDetailProps {\n  alertId: string;\n  onBack: () => void;\n  onRefresh: () => void;\n}\n\nconst FREQUENCY_OPTIONS: { value: AlertFrequency; label: string }[] = [\n  { value: 'MANUAL', label: 'Manual only' },\n  { value: 'DAILY', label: 'Daily' },\n  { value: 'WEEKLY', label: 'Weekly' },\n  { value: 'BIWEEKLY', label: 'Biweekly' },\n  { value: 'MONTHLY', label: 'Monthly' },\n];\n\nfunction formatDate(dateStr: string): string {\n  return new Date(dateStr).toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n    hour: 'numeric',\n    minute: '2-digit',\n  });\n}\n\nexport function AlertDetail({ alertId, onBack, onRefresh }: AlertDetailProps) {\n  const [alert, setAlert] = useState<AlertDetailType | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Edit state\n  const [editing, setEditing] = useState(false);\n  const [editQuery, setEditQuery] = useState('');\n  const [editRegion, setEditRegion] = useState('');\n  const [editMaxArticles, setEditMaxArticles] = useState(20);\n  const [editFrequency, setEditFrequency] = useState<AlertFrequency>('MANUAL');\n\n  useEffect(() => {\n    loadAlert();\n  }, [alertId]);\n\n  const loadAlert = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await getAlert(alertId);\n      setAlert(data);\n      setEditQuery(data.query);\n      setEditRegion(data.region);\n      setEditMaxArticles(data.maxArticles);\n      setEditFrequency(data.frequency);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load alert');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSave = async () => {\n    if (!alert) return;\n    setSaving(true);\n    setError(null);\n    try {\n      await updateAlert(alertId, {\n        query: editQuery,\n        region: editRegion,\n        maxArticles: editMaxArticles,\n        frequency: editFrequency,\n      });\n      setEditing(false);\n      loadAlert();\n      onRefresh();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to save alert');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleRun = async () => {\n    setSaving(true);\n    setError(null);\n    try {\n      await runAlert(alertId);\n      setTimeout(() => {\n        loadAlert();\n        onRefresh();\n      }, 1000);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to run alert');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (error && !alert) {\n    return (\n      <div className=\"text-center py-8\">\n        <p className=\"text-red-600 dark:text-red-400 mb-4\">{error}</p>\n        <Button onClick={onBack}>Go Back</Button>\n      </div>\n    );\n  }\n\n  if (!alert) return null;\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center gap-2 mb-4\">\n        <Button variant=\"ghost\" size=\"sm\" onClick={onBack}>\n          &larr; Back\n        </Button>\n      </div>\n\n      {error && (\n        <div className=\"text-sm text-red-600 dark:text-red-400 mb-2\">{error}</div>\n      )}\n\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-start justify-between\">\n            <CardTitle>{editing ? 'Edit Alert' : alert.query}</CardTitle>\n            {!editing && (\n              <div className=\"flex gap-2\">\n                <Button size=\"sm\" variant=\"outline\" onClick={() => setEditing(true)}>\n                  Edit\n                </Button>\n                <Button size=\"sm\" onClick={handleRun} disabled={saving}>\n                  Run Now\n                </Button>\n              </div>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent>\n          {editing ? (\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Query</label>\n                <input\n                  type=\"text\"\n                  value={editQuery}\n                  onChange={(e) => setEditQuery(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-zinc-300 rounded-md dark:bg-zinc-800 dark:border-zinc-600\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium mb-1\">Region</label>\n                <input\n                  type=\"text\"\n                  value={editRegion}\n                  onChange={(e) => setEditRegion(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-zinc-300 rounded-md dark:bg-zinc-800 dark:border-zinc-600\"\n                />\n              </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Max Articles</label>\n                  <input\n                    type=\"number\"\n                    min={1}\n                    max={50}\n                    value={editMaxArticles}\n                    onChange={(e) => setEditMaxArticles(parseInt(e.target.value) || 20)}\n                    className=\"w-full px-3 py-2 border border-zinc-300 rounded-md dark:bg-zinc-800 dark:border-zinc-600\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Frequency</label>\n                  <select\n                    value={editFrequency}\n                    onChange={(e) => setEditFrequency(e.target.value as AlertFrequency)}\n                    className=\"w-full px-3 py-2 border border-zinc-300 rounded-md dark:bg-zinc-800 dark:border-zinc-600\"\n                  >\n                    {FREQUENCY_OPTIONS.map((opt) => (\n                      <option key={opt.value} value={opt.value}>\n                        {opt.label}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n              <div className=\"flex gap-2 justify-end\">\n                <Button variant=\"outline\" onClick={() => setEditing(false)} disabled={saving}>\n                  Cancel\n                </Button>\n                <Button onClick={handleSave} disabled={saving}>\n                  {saving ? 'Saving...' : 'Save'}\n                </Button>\n              </div>\n            </div>\n          ) : (\n            <div className=\"space-y-2 text-sm\">\n              <p>\n                <span className=\"font-medium\">Region:</span> {alert.region}\n              </p>\n              <p>\n                <span className=\"font-medium\">Max Articles:</span> {alert.maxArticles}\n              </p>\n              <p>\n                <span className=\"font-medium\">Frequency:</span>{' '}\n                {FREQUENCY_OPTIONS.find((o) => o.value === alert.frequency)?.label}\n              </p>\n              <p>\n                <span className=\"font-medium\">Status:</span>{' '}\n                <span className={alert.isActive ? 'text-green-600' : 'text-zinc-500'}>\n                  {alert.isActive ? 'Active' : 'Paused'}\n                </span>\n              </p>\n              {alert.lastRunAt && (\n                <p>\n                  <span className=\"font-medium\">Last Run:</span> {formatDate(alert.lastRunAt)}\n                </p>\n              )}\n              {alert.nextRunAt && alert.isActive && (\n                <p>\n                  <span className=\"font-medium\">Next Run:</span> {formatDate(alert.nextRunAt)}\n                </p>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Articles section */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-base\">\n            Articles ({alert.articles.length})\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {alert.articles.length === 0 ? (\n            <p className=\"text-zinc-500 dark:text-zinc-400\">\n              No articles yet. Run the alert to fetch articles.\n            </p>\n          ) : (\n            <div className=\"space-y-3\">\n              {alert.articles.map((article) => (\n                <div\n                  key={article.id}\n                  className=\"border-b border-zinc-200 dark:border-zinc-700 pb-3 last:border-b-0 last:pb-0\"\n                >\n                  <a\n                    href={article.url}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"font-medium text-blue-600 hover:underline dark:text-blue-400\"\n                  >\n                    {article.title}\n                  </a>\n                  <div className=\"text-xs text-zinc-500 dark:text-zinc-400 mt-1\">\n                    {article.source}  {formatDate(article.publishedAt)}\n                    {article.locationCount > 0 && `  ${article.locationCount} locations`}\n                  </div>\n                  {article.summary && (\n                    <p className=\"text-sm text-zinc-600 dark:text-zinc-300 mt-1 line-clamp-2\">\n                      {article.summary}\n                    </p>\n                  )}\n                </div>\n              ))}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4204, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/alerts/AlertSelector.tsx"],"sourcesContent":["'use client';\n\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Loader2 } from 'lucide-react';\nimport type { AlertListItem } from '@/lib/api';\n\ninterface AlertSelectorProps {\n  alerts: AlertListItem[];\n  selectedAlertId: string | null;\n  onSelect: (alertId: string | null) => void;\n  disabled?: boolean;\n}\n\nexport function AlertSelector({\n  alerts,\n  selectedAlertId,\n  onSelect,\n  disabled,\n}: AlertSelectorProps) {\n  const processingCount = alerts.filter(a => a.processingStatus === 'PROCESSING').length;\n  console.log(`[SELECTOR] AlertSelector RENDER - alertCount=${alerts.length}, selectedAlertId=${selectedAlertId}, disabled=${disabled}, processingCount=${processingCount}`);\n\n  const handleValueChange = (value: string) => {\n    // Don't allow selecting processing alerts\n    const alert = alerts.find(a => a.id === value);\n    if (alert?.processingStatus === 'PROCESSING') {\n      console.log(`[SELECTOR] handleValueChange - blocked, alert is processing`);\n      return;\n    }\n    console.log(`[SELECTOR] handleValueChange - value=${value}`);\n    onSelect(value === 'all' ? null : value);\n  };\n\n  return (\n    <Select\n      value={selectedAlertId ?? 'all'}\n      onValueChange={handleValueChange}\n      disabled={disabled}\n    >\n      <SelectTrigger className=\"w-[250px]\">\n        <SelectValue placeholder=\"Select an alert\" />\n      </SelectTrigger>\n      <SelectContent>\n        <SelectItem value=\"all\">All Alerts</SelectItem>\n        {alerts.map((alert) => {\n          const isProcessing = alert.processingStatus === 'PROCESSING';\n          return (\n            <SelectItem\n              key={alert.id}\n              value={alert.id}\n              disabled={isProcessing}\n              className={isProcessing ? 'opacity-60' : ''}\n            >\n              <span className=\"flex items-center gap-2 truncate\">\n                {isProcessing && (\n                  <Loader2 className=\"h-3 w-3 animate-spin text-muted-foreground\" />\n                )}\n                <span className={isProcessing ? 'text-muted-foreground' : ''}>\n                  {alert.query} - {alert.region}\n                  {isProcessing && ' (Processing...)'}\n                </span>\n              </span>\n            </SelectItem>\n          );\n        })}\n      </SelectContent>\n    </Select>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAOA;AATA;;;;AAmBO,SAAS,cAAc,EAC5B,MAAM,EACN,eAAe,EACf,QAAQ,EACR,QAAQ,EACW;IACnB,MAAM,kBAAkB,OAAO,MAAM,CAAC,CAAA,IAAK,EAAE,gBAAgB,KAAK,cAAc,MAAM;IACtF,QAAQ,GAAG,CAAC,CAAC,6CAA6C,EAAE,OAAO,MAAM,CAAC,kBAAkB,EAAE,gBAAgB,WAAW,EAAE,SAAS,kBAAkB,EAAE,iBAAiB;IAEzK,MAAM,oBAAoB,CAAC;QACzB,0CAA0C;QAC1C,MAAM,QAAQ,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACxC,IAAI,OAAO,qBAAqB,cAAc;YAC5C,QAAQ,GAAG,CAAC,CAAC,2DAA2D,CAAC;YACzE;QACF;QACA,QAAQ,GAAG,CAAC,CAAC,qCAAqC,EAAE,OAAO;QAC3D,SAAS,UAAU,QAAQ,OAAO;IACpC;IAEA,qBACE,mOAAC,qLAAM;QACL,OAAO,mBAAmB;QAC1B,eAAe;QACf,UAAU;;0BAEV,mOAAC,4LAAa;gBAAC,WAAU;0BACvB,cAAA,mOAAC,0LAAW;oBAAC,aAAY;;;;;;;;;;;0BAE3B,mOAAC,4LAAa;;kCACZ,mOAAC,yLAAU;wBAAC,OAAM;kCAAM;;;;;;oBACvB,OAAO,GAAG,CAAC,CAAC;wBACX,MAAM,eAAe,MAAM,gBAAgB,KAAK;wBAChD,qBACE,mOAAC,yLAAU;4BAET,OAAO,MAAM,EAAE;4BACf,UAAU;4BACV,WAAW,eAAe,eAAe;sCAEzC,cAAA,mOAAC;gCAAK,WAAU;;oCACb,8BACC,mOAAC,qQAAO;wCAAC,WAAU;;;;;;kDAErB,mOAAC;wCAAK,WAAW,eAAe,0BAA0B;;4CACvD,MAAM,KAAK;4CAAC;4CAAI,MAAM,MAAM;4CAC5B,gBAAgB;;;;;;;;;;;;;2BAXhB,MAAM,EAAE;;;;;oBAgBnB;;;;;;;;;;;;;AAIR;KAvDgB"}},
    {"offset": {"line": 4321, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/ui/sheet.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-white p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out dark:bg-zinc-950\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-zinc-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-zinc-100 dark:ring-offset-zinc-950 dark:focus:ring-zinc-300 dark:data-[state=open]:bg-zinc-800\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n      {children}\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-zinc-950 dark:text-zinc-50\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-zinc-500 dark:text-zinc-400\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAEA;AAPA;;;;;;;AASA,MAAM,QAAQ,mNAAmB;AAEjC,MAAM,eAAe,sNAAsB;AAE3C,MAAM,aAAa,oNAAoB;AAEvC,MAAM,cAAc,qNAAqB;AAEzC,MAAM,6BAAe,iNAAgB,CAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mOAAC,sNAAsB;QACrB,WAAW,IAAA,kKAAE,EACX,0JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;KAVH;AAaN,aAAa,WAAW,GAAG,sNAAsB,CAAC,WAAW;AAE7D,MAAM,gBAAgB,IAAA,gNAAG,EACvB,gNACA;IACE,UAAU;QACR,MAAM;YACJ,KAAK;YACL,QACE;YACF,MAAM;YACN,OACE;QACJ;IACF;IACA,iBAAiB;QACf,MAAM;IACR;AACF;AAOF,MAAM,6BAAe,iNAAgB,OAGnC,CAAC,EAAE,OAAO,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpD,mOAAC;;0BACC,mOAAC;;;;;0BACD,mOAAC,sNAAsB;gBACrB,KAAK;gBACL,WAAW,IAAA,kKAAE,EAAC,cAAc;oBAAE;gBAAK,IAAI;gBACtC,GAAG,KAAK;;kCAET,mOAAC,oNAAoB;wBAAC,WAAU;;0CAC9B,mOAAC,0OAAC;gCAAC,WAAU;;;;;;0CACb,mOAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;oBAE3B;;;;;;;;;;;;;;AAIP,aAAa,WAAW,GAAG,sNAAsB,CAAC,WAAW;AAE7D,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,mOAAC;QACC,WAAW,IAAA,kKAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,YAAY,WAAW,GAAG;AAE1B,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,mOAAC;QACC,WAAW,IAAA,kKAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,iNAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mOAAC,oNAAoB;QACnB,KAAK;QACL,WAAW,IAAA,kKAAE,EAAC,yDAAyD;QACtE,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG,oNAAoB,CAAC,WAAW;AAEzD,MAAM,iCAAmB,iNAAgB,OAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mOAAC,0NAA0B;QACzB,KAAK;QACL,WAAW,IAAA,kKAAE,EAAC,4CAA4C;QACzD,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG,0NAA0B,CAAC,WAAW"}},
    {"offset": {"line": 4497, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-zinc-100 dark:bg-zinc-800\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,mOAAC;QACC,WAAW,IAAA,kKAAE,EAAC,yDAAyD;QACtE,GAAG,KAAK;;;;;;AAGf;KAVS"}},
    {"offset": {"line": 4526, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/alerts/PipecatChat.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { Loader2, Send, Phone, PhoneOff, Mic, MicOff } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport {\n  PipecatClient,\n  type UserTransportMessageData,\n} from '@pipecat-ai/client-js';\nimport { DailyTransport } from '@pipecat-ai/daily-transport';\n\ninterface Message {\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: number;\n}\n\ninterface PipecatChatProps {\n  alertId: string;\n  onClose?: () => void;\n}\n\nexport function PipecatChat({ alertId, onClose }: PipecatChatProps) {\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [input, setInput] = useState('');\n  const [isConnected, setIsConnected] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isMicEnabled, setIsMicEnabled] = useState(false);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const clientRef = useRef<PipecatClient | null>(null);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  // Initialize Pipecat client\n  useEffect(() => {\n    const initClient = async () => {\n      try {\n        const client = new PipecatClient({\n          transport: new DailyTransport(),\n          enableMic: false,\n          enableCam: false,\n          autoSubscribeAudio: true,\n        });\n\n        // Handle incoming messages from the bot\n        client.on('message', (message: UserTransportMessageData) => {\n          if (message.type === 'text') {\n            setMessages((prev) => [\n              ...prev,\n              {\n                role: 'assistant',\n                content: message.data,\n                timestamp: Date.now(),\n              },\n            ]);\n          }\n        });\n\n        client.on('connected', () => {\n          console.log('[PIPECAT] Connected to bot');\n          setIsConnected(true);\n          setIsConnecting(false);\n        });\n\n        client.on('disconnected', () => {\n          console.log('[PIPECAT] Disconnected from bot');\n          setIsConnected(false);\n          setIsConnecting(false);\n          setIsMicEnabled(false);\n        });\n\n        client.on('error', (error) => {\n          console.error('[PIPECAT] Error:', error);\n          setIsConnecting(false);\n        });\n\n        clientRef.current = client;\n      } catch (error) {\n        console.error('[PIPECAT] Failed to initialize client:', error);\n      }\n    };\n\n    initClient();\n\n    return () => {\n      if (clientRef.current?.isConnected()) {\n        clientRef.current.disconnect();\n      }\n    };\n  }, []);\n\n  // Auto-scroll to latest message\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  const connect = async () => {\n    if (!clientRef.current || isConnecting) return;\n\n    setIsConnecting(true);\n    try {\n      await clientRef.current.startBotAndConnect({\n        endpoint: `${process.env.NEXT_PUBLIC_API_URL || '/api'}/pipecat/connect`,\n        requestData: {\n          alertId,\n        },\n      });\n    } catch (error) {\n      console.error('[PIPECAT] Connection failed:', error);\n      setIsConnecting(false);\n    }\n  };\n\n  const disconnect = async () => {\n    if (!clientRef.current) return;\n\n    try {\n      await clientRef.current.disconnect();\n      setIsMicEnabled(false);\n    } catch (error) {\n      console.error('[PIPECAT] Disconnect failed:', error);\n    }\n  };\n\n  const toggleMic = async () => {\n    if (!clientRef.current || !isConnected) return;\n\n    try {\n      if (isMicEnabled) {\n        await clientRef.current.disableMic();\n        setIsMicEnabled(false);\n      } else {\n        await clientRef.current.enableMic();\n        setIsMicEnabled(true);\n      }\n    } catch (error) {\n      console.error('[PIPECAT] Mic toggle failed:', error);\n    }\n  };\n\n  const sendMessage = async () => {\n    if (!input.trim() || !clientRef.current || !isConnected) return;\n\n    const userMessage = input.trim();\n\n    // Add user message to display\n    setMessages((prev) => [\n      ...prev,\n      {\n        role: 'user',\n        content: userMessage,\n        timestamp: Date.now(),\n      },\n    ]);\n\n    setInput('');\n    setIsLoading(true);\n\n    try {\n      // Send message to bot via text transport\n      await clientRef.current.sendMessage(userMessage);\n    } catch (error) {\n      console.error('[PIPECAT] Failed to send message:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-full bg-zinc-50 dark:bg-zinc-950\">\n      {/* Header */}\n      <div className=\"border-b border-zinc-200 dark:border-zinc-800 p-4 flex items-center justify-between\">\n        <div>\n          <h2 className=\"font-semibold text-sm\">Voice Chat Assistant</h2>\n          <p className=\"text-xs text-zinc-500 dark:text-zinc-400\">\n            {isConnected ? 'Connected' : 'Disconnected'}\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          {isConnected ? (\n            <>\n              <Button\n                onClick={toggleMic}\n                size=\"sm\"\n                variant={isMicEnabled ? 'default' : 'outline'}\n                className=\"text-xs\"\n              >\n                {isMicEnabled ? (\n                  <Mic className=\"h-3.5 w-3.5 mr-1.5\" />\n                ) : (\n                  <MicOff className=\"h-3.5 w-3.5 mr-1.5\" />\n                )}\n                {isMicEnabled ? 'Mic On' : 'Mic Off'}\n              </Button>\n              <Button\n                onClick={disconnect}\n                size=\"sm\"\n                variant=\"destructive\"\n                className=\"text-xs\"\n              >\n                <PhoneOff className=\"h-3.5 w-3.5 mr-1.5\" />\n                End Call\n              </Button>\n            </>\n          ) : (\n            <Button\n              onClick={connect}\n              size=\"sm\"\n              disabled={isConnecting}\n              className=\"text-xs bg-teal-600 hover:bg-teal-700\"\n            >\n              {isConnecting ? (\n                <>\n                  <Loader2 className=\"h-3.5 w-3.5 mr-1.5 animate-spin\" />\n                  Connecting...\n                </>\n              ) : (\n                <>\n                  <Phone className=\"h-3.5 w-3.5 mr-1.5\" />\n                  Start Call\n                </>\n              )}\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Messages */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-3\">\n        {messages.length === 0 && !isConnected && (\n          <div className=\"flex items-center justify-center h-full text-center\">\n            <div>\n              <p className=\"text-sm text-zinc-500 dark:text-zinc-400 mb-3\">\n                Connect to start voice chat\n              </p>\n              <Button\n                onClick={connect}\n                disabled={isConnecting}\n                className=\"bg-teal-600 hover:bg-teal-700\"\n              >\n                {isConnecting ? 'Connecting...' : 'Start Voice Chat'}\n              </Button>\n            </div>\n          </div>\n        )}\n\n        {messages.map((msg, i) => (\n          <div\n            key={i}\n            className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}\n          >\n            <div\n              className={`max-w-xs lg:max-w-md text-sm rounded-lg p-3 ${\n                msg.role === 'user'\n                  ? 'bg-teal-600 text-white'\n                  : 'bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100'\n              }`}\n            >\n              <p className=\"whitespace-pre-wrap break-words\">{msg.content}</p>\n              <span className=\"text-xs opacity-70 mt-1 block\">\n                {new Date(msg.timestamp).toLocaleTimeString([], {\n                  hour: '2-digit',\n                  minute: '2-digit',\n                })}\n              </span>\n            </div>\n          </div>\n        ))}\n\n        {isLoading && (\n          <div className=\"flex justify-start\">\n            <div className=\"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 rounded-lg p-3 flex items-center gap-2\">\n              <Loader2 className=\"h-4 w-4 animate-spin\" />\n              <span className=\"text-sm\">Thinking...</span>\n            </div>\n          </div>\n        )}\n\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Input */}\n      {isConnected && (\n        <div className=\"border-t border-zinc-200 dark:border-zinc-800 p-4\">\n          <div className=\"flex gap-2\">\n            <input\n              type=\"text\"\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              onKeyDown={handleKeyDown}\n              placeholder=\"Type or speak...\"\n              disabled={isLoading}\n              className=\"flex-1 px-3 py-2 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-900 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500 disabled:opacity-50\"\n            />\n            <Button\n              onClick={sendMessage}\n              disabled={!input.trim() || isLoading}\n              className=\"bg-teal-600 hover:bg-teal-700 text-white\"\n            >\n              {isLoading ? (\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\n              ) : (\n                <Send className=\"h-4 w-4\" />\n              )}\n            </Button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5012, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/alerts/ArticlePanel.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { format } from 'date-fns';\nimport { ExternalLink, MapPin, Calendar, User, Send, Search, Loader2, MessageCircle } from 'lucide-react';\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from '@/components/ui/sheet';\nimport { Button } from '@/components/ui/button';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { chatWithArticles } from '@/lib/api';\nimport { PipecatChat } from './PipecatChat';\nimport type { AlertDetail, AlertArticle } from '@/lib/api';\n\ninterface ChatMessage {\n  role: 'user' | 'assistant';\n  content: string;\n}\n\ninterface ArticlePanelProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  alert: AlertDetail | null;\n  loading?: boolean;\n}\n\nexport function ArticlePanel({ open, onOpenChange, alert, loading }: ArticlePanelProps) {\n  const [chatMessages, setChatMessages] = useState<ChatMessage[]>([]);\n  const [chatInput, setChatInput] = useState('');\n  const [chatLoading, setChatLoading] = useState(false);\n  const [showPipecatChat, setShowPipecatChat] = useState(false);\n  const chatContainerRef = useRef<HTMLDivElement>(null);\n\n  console.log(`[PANEL] ArticlePanel RENDER - open=${open}, loading=${loading}, alertId=${alert?.id}, articleCount=${alert?.articles?.length || 0}`);\n  if (!loading && alert?.articles && alert.articles.length === 0) {\n    console.warn(`[PANEL] ArticlePanel NO ARTICLES - query=\"${alert.query}\", region=\"${alert.region}\"`);\n  }\n\n  // Scroll to bottom when new messages arrive\n  useEffect(() => {\n    if (chatContainerRef.current) {\n      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n    }\n  }, [chatMessages]);\n\n  // Reset chat when alert changes\n  useEffect(() => {\n    setChatMessages([]);\n    setChatInput('');\n  }, [alert?.id]);\n\n  const handleSendMessage = async () => {\n    console.log(`[PANEL] handleSendMessage START - chatInput=\"${chatInput}\", alertId=${alert?.id}, chatLoading=${chatLoading}`);\n\n    if (!chatInput.trim() || !alert?.id || chatLoading) {\n      console.log(`[PANEL] handleSendMessage EARLY RETURN - trim=${!!chatInput.trim()}, hasAlertId=${!!alert?.id}, chatLoading=${chatLoading}`);\n      return;\n    }\n\n    const userMessage = chatInput.trim();\n    console.log(`[PANEL] handleSendMessage - userMessage=\"${userMessage.substring(0, 50)}...\"`);\n\n    setChatInput('');\n    setChatMessages((prev) => {\n      console.log(`[PANEL] adding user message, new count=${prev.length + 1}`);\n      return [...prev, { role: 'user', content: userMessage }];\n    });\n    setChatLoading(true);\n    console.log(`[PANEL] calling API for alertId=${alert.id}`);\n\n    try {\n      const response = await chatWithArticles(alert.id, userMessage);\n      console.log(`[PANEL] API returned agentId=${response.agentId}, responseLength=${response.response.length}`);\n\n      setChatMessages((prev) => {\n        console.log(`[PANEL] adding assistant message, new count=${prev.length + 1}`);\n        return [...prev, { role: 'assistant', content: response.response }];\n      });\n    } catch (error) {\n      console.error('[PANEL] Chat API error:', error instanceof Error ? error.message : String(error));\n      console.error('[PANEL] Full error:', error);\n\n      setChatMessages((prev) => {\n        console.log(`[PANEL] adding error message`);\n        return [\n          ...prev,\n          { role: 'assistant', content: 'Sorry, I encountered an error. Please try again.' },\n        ];\n      });\n    } finally {\n      setChatLoading(false);\n      console.log(`[PANEL] handleSendMessage DONE`);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    console.log(`[PANEL] handleKeyDown - key=${e.key}, shiftKey=${e.shiftKey}`);\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  return (\n    <Sheet open={open} onOpenChange={onOpenChange}>\n      <SheetContent className=\"w-full sm:max-w-md flex flex-col\">\n        <SheetHeader>\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex-1\">\n              <SheetTitle>\n                {loading ? (\n                  <Skeleton className=\"h-6 w-48\" />\n                ) : (\n                  <>\n                    {console.log(`[PANEL] SheetTitle displaying - query=\"${alert?.query}\"`)}\n                    {alert?.query ?? 'Alert Articles'}\n                  </>\n                )}\n              </SheetTitle>\n              <SheetDescription>\n                {loading ? (\n                  <Skeleton className=\"h-4 w-32\" />\n                ) : (\n                  <>\n                    {console.log(`[PANEL] SheetDescription displaying - region=\"${alert?.region}\"`)}\n                    {alert?.region ?? ''}\n                  </>\n                )}\n              </SheetDescription>\n            </div>\n            {alert && !loading && (\n              <Button\n                onClick={() => setShowPipecatChat(!showPipecatChat)}\n                variant={showPipecatChat ? 'default' : 'outline'}\n                size=\"sm\"\n                className=\"ml-2 shrink-0\"\n              >\n                <MessageCircle className=\"h-4 w-4\" />\n              </Button>\n            )}\n          </div>\n        </SheetHeader>\n\n        {/* Scrollable content area */}\n        {showPipecatChat && alert?.id ? (\n          <PipecatChat alertId={alert.id} onClose={() => setShowPipecatChat(false)} />\n        ) : (\n          <>\n            <div className=\"flex-1 overflow-y-auto mt-6 space-y-4\" ref={chatContainerRef}>\n              {/* Articles list */}\n              {loading ? (\n                <>\n                  {console.log(`[PANEL] ArticlePanel LOADING state`)}\n                  {Array.from({ length: 3 }).map((_, i) => (\n                    <ArticleSkeleton key={i} />\n                  ))}\n                </>\n              ) : alert?.articles && alert.articles.length > 0 ? (\n                <>\n                  {console.log(`[PANEL] ArticlePanel DISPLAYING ${alert.articles.length} articles`)}\n                  {alert.articles.map((article) => (\n                    <ArticleCard key={article.id} article={article} />\n                  ))}\n                </>\n              ) : (\n                <>\n                  {console.log(`[PANEL] ArticlePanel EMPTY state - no articles found`)}\n                  <p className=\"text-sm text-zinc-500 dark:text-zinc-400 text-center py-8\">\n                    No articles found for this alert.\n                  </p>\n                </>\n              )}\n\n              {/* Chat messages */}\n              {chatMessages.length > 0 && (\n                <div className=\"border-t border-zinc-200 dark:border-zinc-800 pt-4 mt-4 space-y-3\">\n                  <p className=\"text-xs text-zinc-500 dark:text-zinc-400 font-medium\">Chat</p>\n                  {chatMessages.map((msg, i) => (\n                    <div\n                      key={i}\n                      className={`text-sm rounded-lg p-3 ${\n                        msg.role === 'user'\n                          ? 'bg-zinc-100 dark:bg-zinc-800 ml-4'\n                          : 'bg-teal-50 dark:bg-teal-900/20 mr-4'\n                      }`}\n                    >\n                      <p className=\"text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-1\">\n                        {msg.role === 'user' ? 'You' : 'Assistant'}\n                      </p>\n                      <p className=\"whitespace-pre-wrap\">{msg.content}</p>\n                    </div>\n                  ))}\n                  {chatLoading && (\n                    <div className=\"bg-teal-50 dark:bg-teal-900/20 mr-4 rounded-lg p-3\">\n                      <p className=\"text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-1\">\n                        Assistant\n                      </p>\n                      <div className=\"flex items-center gap-2 text-sm text-zinc-500\">\n                        <Loader2 className=\"h-4 w-4 animate-spin\" />\n                        Thinking...\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n\n            {/* Chat input - fixed at bottom */}\n            {alert && !loading && alert.articles && alert.articles.length > 0 && (\n              <div className=\"border-t border-zinc-200 dark:border-zinc-800 pt-4 mt-4\">\n                <p className=\"text-sm text-zinc-600 dark:text-zinc-400 mb-2\">\n                  Ask about these articles\n                </p>\n                <div className=\"flex gap-2\">\n                  <div className=\"relative flex-1\">\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-zinc-400\" />\n                    <input\n                      type=\"text\"\n                      value={chatInput}\n                      onChange={(e) => setChatInput(e.target.value)}\n                      onKeyDown={handleKeyDown}\n                      placeholder=\"Ask a question...\"\n                      disabled={chatLoading}\n                      className=\"w-full pl-10 pr-4 py-2 rounded-lg border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 text-sm focus:outline-none focus:ring-2 focus:ring-teal-500 disabled:opacity-50\"\n                    />\n                  </div>\n                  <Button\n                    onClick={handleSendMessage}\n                    disabled={!chatInput.trim() || chatLoading}\n                    className=\"bg-teal-600 hover:bg-teal-700 text-white shrink-0\"\n                  >\n                    {chatLoading ? (\n                      <Loader2 className=\"h-4 w-4 animate-spin\" />\n                    ) : (\n                      <Send className=\"h-4 w-4\" />\n                    )}\n                  </Button>\n                </div>\n              </div>\n            )}\n          </>\n        )}\n      </SheetContent>\n    </Sheet>\n  );\n}\n\nfunction ArticleCard({ article }: { article: AlertArticle }) {\n  const publishedDate = article.publishedAt\n    ? format(new Date(article.publishedAt), 'MMM d, yyyy')\n    : null;\n\n  return (\n    <div className=\"rounded-lg border border-zinc-200 dark:border-zinc-800 p-4 space-y-3\">\n      <div className=\"flex items-start justify-between gap-2\">\n        <h3 className=\"font-medium text-sm leading-tight line-clamp-2\">\n          {article.title}\n        </h3>\n        <Button\n          variant=\"ghost\"\n          size=\"icon-xs\"\n          asChild\n          className=\"shrink-0\"\n        >\n          <a\n            href={article.url}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            aria-label=\"Open article\"\n          >\n            <ExternalLink className=\"h-3.5 w-3.5\" />\n          </a>\n        </Button>\n      </div>\n\n      {article.summary && (\n        <p className=\"text-xs text-zinc-600 dark:text-zinc-400 line-clamp-3\">\n          {article.summary}\n        </p>\n      )}\n\n      <div className=\"flex flex-wrap gap-3 text-xs text-zinc-500 dark:text-zinc-400\">\n        <span className=\"inline-flex items-center gap-1\">\n          <span className=\"font-medium\">{article.source}</span>\n        </span>\n        {publishedDate && (\n          <span className=\"inline-flex items-center gap-1\">\n            <Calendar className=\"h-3 w-3\" />\n            {publishedDate}\n          </span>\n        )}\n        {article.author && (\n          <span className=\"inline-flex items-center gap-1\">\n            <User className=\"h-3 w-3\" />\n            {article.author}\n          </span>\n        )}\n        {article.locationCount > 0 && (\n          <span className=\"inline-flex items-center gap-1\">\n            <MapPin className=\"h-3 w-3\" />\n            {article.locationCount} location{article.locationCount !== 1 ? 's' : ''}\n          </span>\n        )}\n      </div>\n\n      {article.sentiment && (\n        <span\n          className={`inline-block text-xs px-2 py-0.5 rounded-full ${\n            article.sentiment === 'positive'\n              ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400'\n              : article.sentiment === 'negative'\n              ? 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400'\n              : 'bg-zinc-100 text-zinc-600 dark:bg-zinc-800 dark:text-zinc-400'\n          }`}\n        >\n          {article.sentiment}\n        </span>\n      )}\n    </div>\n  );\n}\n\nfunction ArticleSkeleton() {\n  return (\n    <div className=\"rounded-lg border border-zinc-200 dark:border-zinc-800 p-4 space-y-3\">\n      <Skeleton className=\"h-4 w-full\" />\n      <Skeleton className=\"h-4 w-3/4\" />\n      <Skeleton className=\"h-12 w-full\" />\n      <div className=\"flex gap-3\">\n        <Skeleton className=\"h-3 w-16\" />\n        <Skeleton className=\"h-3 w-20\" />\n        <Skeleton className=\"h-3 w-14\" />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5662, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/components/alerts/index.ts"],"sourcesContent":["export { CreateAlertForm } from './CreateAlertForm';\nexport { CreateAlertDialog, CreateAlertDialogTrigger } from './CreateAlertDialog';\nexport { AlertList } from './AlertList';\nexport { AlertDetail } from './AlertDetail';\nexport { AlertSelector } from './AlertSelector';\nexport { ArticlePanel } from './ArticlePanel';\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 5682, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/hooks/useAlerts.ts"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useEffect, useRef } from 'react';\nimport {\n  listAlerts,\n  getAlertsLocations,\n  getAlert,\n  type AlertListItem,\n  type AlertDetail,\n  type GeoJsonFeatureCollection,\n} from '@/lib/api';\n\nconst POLLING_INTERVAL = 3000; // Poll every 3 seconds when processing\n\ninterface UseAlertsState {\n  alerts: AlertListItem[];\n  selectedAlertId: string | null;\n  selectedAlert: AlertDetail | null;\n  locations: GeoJsonFeatureCollection | null;\n  loading: boolean;\n  locationsLoading: boolean;\n  error: string | null;\n  hasProcessingAlerts: boolean;\n}\n\ninterface UseAlertsActions {\n  loadAlerts: () => Promise<void>;\n  selectAlert: (alertId: string | null) => void;\n  loadLocations: (alertIds?: string[]) => Promise<void>;\n  refreshAll: () => Promise<void>;\n}\n\nexport function useAlerts(): UseAlertsState & UseAlertsActions {\n  const [alerts, setAlerts] = useState<AlertListItem[]>([]);\n  const [selectedAlertId, setSelectedAlertId] = useState<string | null>(null);\n  const [selectedAlert, setSelectedAlert] = useState<AlertDetail | null>(null);\n  const [locations, setLocations] = useState<GeoJsonFeatureCollection | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [locationsLoading, setLocationsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const pollingIntervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Check if any alerts are processing\n  const hasProcessingAlerts = alerts.some(a => a.processingStatus === 'PROCESSING');\n\n  const loadAlerts = useCallback(async () => {\n    console.log(`[HOOK] loadAlerts START`);\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await listAlerts();\n      console.log(`[HOOK] loadAlerts SUCCESS - count=${data.length}, processingCount=${data.filter(a => a.processingStatus === 'PROCESSING').length}`);\n      setAlerts(data);\n    } catch (err) {\n      const errorMsg = err instanceof Error ? err.message : 'Failed to load alerts';\n      console.error(`[HOOK] loadAlerts FAILED - error=${errorMsg}`);\n      setError(errorMsg);\n      setAlerts([]);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  const loadLocations = useCallback(async (alertIds?: string[]) => {\n    console.log(`[HOOK] loadLocations START - alertIds=${JSON.stringify(alertIds)}`);\n    setLocationsLoading(true);\n    try {\n      const data = await getAlertsLocations(alertIds);\n      console.log(`[HOOK] loadLocations SUCCESS - featureCount=${data.features.length}`);\n      setLocations(data);\n    } catch (err) {\n      console.error(`[HOOK] loadLocations FAILED - error=${err instanceof Error ? err.message : String(err)}`);\n      // Silently fail - user may not have alerts or be logged in\n      setLocations({ type: 'FeatureCollection', features: [] });\n    } finally {\n      setLocationsLoading(false);\n    }\n  }, []);\n\n  const selectAlert = useCallback(async (alertId: string | null) => {\n    console.log(`[HOOK] selectAlert START - alertId=${alertId}`);\n    setSelectedAlertId(alertId);\n\n    if (alertId === null) {\n      console.log(`[HOOK] selectAlert DESELECTING - loading all locations`);\n      setSelectedAlert(null);\n      // Load all locations when deselecting\n      await loadLocations();\n    } else {\n      console.log(`[HOOK] selectAlert SELECTING - loading alert detail and locations`);\n      // Load specific alert details and its locations\n      try {\n        const [alertDetail] = await Promise.all([\n          getAlert(alertId),\n          loadLocations([alertId]),\n        ]);\n        console.log(`[HOOK] selectAlert SUCCESS - alertId=${alertId}, query=\"${alertDetail.query}\"`);\n        setSelectedAlert(alertDetail);\n      } catch (err) {\n        console.error(`[HOOK] selectAlert FAILED - alertId=${alertId}, error=${err instanceof Error ? err.message : String(err)}`);\n        setSelectedAlert(null);\n      }\n    }\n  }, [loadLocations]);\n\n  const refreshAll = useCallback(async () => {\n    console.log(`[HOOK] refreshAll START - selectedAlertId=${selectedAlertId}`);\n    await Promise.all([\n      loadAlerts(),\n      loadLocations(selectedAlertId ? [selectedAlertId] : undefined),\n    ]);\n    console.log(`[HOOK] refreshAll SUCCESS`);\n  }, [loadAlerts, loadLocations, selectedAlertId]);\n\n  // Initial load\n  useEffect(() => {\n    console.log(`[HOOK] useAlerts INITIAL LOAD`);\n    loadAlerts();\n    loadLocations();\n  }, [loadAlerts, loadLocations]);\n\n  // Polling effect for processing alerts\n  useEffect(() => {\n    // Clear any existing polling\n    if (pollingIntervalRef.current) {\n      clearInterval(pollingIntervalRef.current);\n      pollingIntervalRef.current = null;\n    }\n\n    // Start polling if we have processing alerts\n    if (hasProcessingAlerts) {\n      console.log(`[HOOK] Starting polling for processing alerts`);\n      pollingIntervalRef.current = setInterval(async () => {\n        console.log(`[HOOK] Polling for alert updates...`);\n        try {\n          const data = await listAlerts();\n          const stillProcessing = data.filter(a => a.processingStatus === 'PROCESSING');\n          console.log(`[HOOK] Poll result - total=${data.length}, stillProcessing=${stillProcessing.length}`);\n          setAlerts(data);\n\n          // If an alert just finished processing and is currently selected, reload it\n          if (selectedAlertId) {\n            const selectedAlertData = data.find(a => a.id === selectedAlertId);\n            if (selectedAlertData && selectedAlertData.processingStatus !== 'PROCESSING') {\n              console.log(`[HOOK] Selected alert finished processing, reloading details and locations`);\n              const [alertDetail] = await Promise.all([\n                getAlert(selectedAlertId),\n                loadLocations([selectedAlertId]),\n              ]);\n              setSelectedAlert(alertDetail);\n            }\n          }\n\n          // If no more processing alerts, also refresh locations\n          if (stillProcessing.length === 0) {\n            console.log(`[HOOK] All alerts finished processing, refreshing locations`);\n            await loadLocations(selectedAlertId ? [selectedAlertId] : undefined);\n          }\n        } catch (err) {\n          console.error(`[HOOK] Polling error:`, err);\n        }\n      }, POLLING_INTERVAL);\n    }\n\n    return () => {\n      if (pollingIntervalRef.current) {\n        clearInterval(pollingIntervalRef.current);\n        pollingIntervalRef.current = null;\n      }\n    };\n  }, [hasProcessingAlerts, selectedAlertId, loadLocations]);\n\n  return {\n    alerts,\n    selectedAlertId,\n    selectedAlert,\n    locations,\n    loading,\n    locationsLoading,\n    error,\n    hasProcessingAlerts,\n    loadAlerts,\n    selectAlert,\n    loadLocations,\n    refreshAll,\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5890, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/lib/map-utils.ts"],"sourcesContent":["import bbox from '@turf/bbox';\nimport type { GeoJsonFeatureCollection } from '@/lib/api';\n\nexport type MapBounds = [[number, number], [number, number]];\n\n/**\n * Calculate map bounds from a GeoJSON FeatureCollection using turf.js bbox\n * @param geojson - GeoJSON FeatureCollection with Point features\n * @returns Map bounds as [[minLng, minLat], [maxLng, maxLat]] or null if no valid features\n */\nexport function calculateBounds(geojson: GeoJsonFeatureCollection): MapBounds | null {\n  if (!geojson.features || geojson.features.length === 0) {\n    return null;\n  }\n\n  // Filter to ensure we have valid Point geometries\n  const validFeatures = geojson.features.filter(\n    (f) => f.geometry?.type === 'Point' &&\n           Array.isArray(f.geometry.coordinates) &&\n           f.geometry.coordinates.length >= 2\n  );\n\n  if (validFeatures.length === 0) {\n    return null;\n  }\n\n  // If only one point, return a small bounding box around it\n  if (validFeatures.length === 1) {\n    const [lng, lat] = validFeatures[0].geometry.coordinates;\n    const padding = 0.01; // ~1km padding\n    return [\n      [lng - padding, lat - padding],\n      [lng + padding, lat + padding],\n    ];\n  }\n\n  // bbox returns [west, south, east, north] = [minLng, minLat, maxLng, maxLat]\n  const [minLng, minLat, maxLng, maxLat] = bbox({\n    type: 'FeatureCollection',\n    features: validFeatures,\n  });\n\n  return [\n    [minLng, minLat],\n    [maxLng, maxLat],\n  ];\n}\n\n/**\n * Fit bounds options for react-map-gl\n */\nexport const DEFAULT_FIT_BOUNDS_OPTIONS = {\n  padding: 50,\n  maxZoom: 14,\n  duration: 500,\n};\n"],"names":[],"mappings":";;;;;;AAAA;;AAUO,SAAS,gBAAgB,OAAiC;IAC/D,IAAI,CAAC,QAAQ,QAAQ,IAAI,QAAQ,QAAQ,CAAC,MAAM,KAAK,GAAG;QACtD,OAAO;IACT;IAEA,kDAAkD;IAClD,MAAM,gBAAgB,QAAQ,QAAQ,CAAC,MAAM,CAC3C,CAAC,IAAM,EAAE,QAAQ,EAAE,SAAS,WACrB,MAAM,OAAO,CAAC,EAAE,QAAQ,CAAC,WAAW,KACpC,EAAE,QAAQ,CAAC,WAAW,CAAC,MAAM,IAAI;IAG1C,IAAI,cAAc,MAAM,KAAK,GAAG;QAC9B,OAAO;IACT;IAEA,2DAA2D;IAC3D,IAAI,cAAc,MAAM,KAAK,GAAG;QAC9B,MAAM,CAAC,KAAK,IAAI,GAAG,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,WAAW;QACxD,MAAM,UAAU,MAAM,eAAe;QACrC,OAAO;YACL;gBAAC,MAAM;gBAAS,MAAM;aAAQ;YAC9B;gBAAC,MAAM;gBAAS,MAAM;aAAQ;SAC/B;IACH;IAEA,6EAA6E;IAC7E,MAAM,CAAC,QAAQ,QAAQ,QAAQ,OAAO,GAAG,IAAA,0MAAI,EAAC;QAC5C,MAAM;QACN,UAAU;IACZ;IAEA,OAAO;QACL;YAAC;YAAQ;SAAO;QAChB;YAAC;YAAQ;SAAO;KACjB;AACH;AAKO,MAAM,6BAA6B;IACxC,SAAS;IACT,SAAS;IACT,UAAU;AACZ"}},
    {"offset": {"line": 5950, "column": 0}, "map": {"version":3,"sources":["file:///Users/matthewthomas/repos/map-searcher/client/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useCallback, useEffect } from \"react\";\nimport type { MapRef } from \"react-map-gl/maplibre\";\nimport { MapContainer, LocationPins, LOCATION_PINS_LAYER_IDS } from \"@/components/map\";\nimport { AgentInput } from \"@/components/AgentInput\";\nimport { ProtectedRoute, UserHeader } from \"@/components/auth\";\nimport {\n  CreateAlertDialog,\n  CreateAlertDialogTrigger,\n  AlertSelector,\n  ArticlePanel,\n} from \"@/components/alerts\";\nimport { useAlerts } from \"@/hooks/useAlerts\";\nimport { calculateBounds, DEFAULT_FIT_BOUNDS_OPTIONS } from \"@/lib/map-utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { FileText, Loader2 } from \"lucide-react\";\n\nexport default function Home() {\n  const mapRef = useRef<MapRef>(null);\n  const [createDialogOpen, setCreateDialogOpen] = useState(false);\n  const [articlePanelOpen, setArticlePanelOpen] = useState(false);\n\n  const {\n    alerts,\n    selectedAlertId,\n    selectedAlert,\n    locations,\n    loading,\n    locationsLoading,\n    hasProcessingAlerts,\n    selectAlert,\n    refreshAll,\n  } = useAlerts();\n\n  // Fit map to bounds when locations change\n  const fitMapToBounds = useCallback(() => {\n    console.log(`[PAGE] fitMapToBounds - locations=${locations?.features.length || 0}, mapRef=${!!mapRef.current}`);\n    if (!locations || !mapRef.current) {\n      console.log(`[PAGE] fitMapToBounds SKIPPED - no locations or mapRef`);\n      return;\n    }\n\n    const bounds = calculateBounds(locations);\n    console.log(`[PAGE] fitMapToBounds - bounds=${bounds ? `[${bounds[0]}, ${bounds[1]}, ${bounds[2]}, ${bounds[3]}]` : 'null'}`);\n    if (bounds) {\n      console.log(`[PAGE] fitMapToBounds FITTING map to bounds`);\n      mapRef.current.fitBounds(bounds, DEFAULT_FIT_BOUNDS_OPTIONS);\n    }\n  }, [locations]);\n\n  // Fit bounds when an alert is selected and locations load\n  useEffect(() => {\n    console.log(`[PAGE] fitBounds effect - selectedAlertId=${selectedAlertId}, featureCount=${locations?.features.length || 0}`);\n    if (selectedAlertId && locations && locations.features.length > 0) {\n      console.log(`[PAGE] fitBounds effect CALLING fitMapToBounds`);\n      fitMapToBounds();\n    }\n  }, [selectedAlertId, locations, fitMapToBounds]);\n\n  const handleAlertSelect = (alertId: string | null) => {\n    console.log(`[PAGE] handleAlertSelect - alertId=${alertId}`);\n    selectAlert(alertId);\n    if (alertId) {\n      console.log(`[PAGE] handleAlertSelect OPENING article panel`);\n      setArticlePanelOpen(true);\n    }\n  };\n\n  const handleAlertCreated = () => {\n    console.log(`[PAGE] handleAlertCreated - refreshing all data`);\n    refreshAll();\n  };\n\n  const hasLocations = locations && locations.features.length > 0;\n  const hasAlerts = alerts.length > 0;\n\n  return (\n    <ProtectedRoute>\n      <div className=\"flex min-h-screen min-h-[100dvh] flex-col bg-zinc-50 font-sans dark:bg-black\">\n        <UserHeader />\n        <main\n          id=\"main-content\"\n          className=\"mx-auto w-full max-w-2xl flex-1 px-4 py-6 sm:px-6 sm:py-8\"\n          aria-label=\"Main content\"\n        >\n          <div className=\"flex items-center justify-between mb-3 sm:mb-4\">\n            <h1 className=\"text-xl font-semibold tracking-tight text-zinc-900 sm:text-2xl dark:text-zinc-50\">\n              Weave Hacks  Voice\n            </h1>\n            <CreateAlertDialogTrigger onOpenChange={setCreateDialogOpen} />\n          </div>\n\n          {/* Alert selector and view articles button */}\n          {hasAlerts && (\n            <div className=\"flex flex-col gap-2 mb-3\">\n              <div className=\"flex items-center gap-2\">\n                <AlertSelector\n                  alerts={alerts}\n                  selectedAlertId={selectedAlertId}\n                  onSelect={handleAlertSelect}\n                  disabled={loading}\n                />\n                {selectedAlertId && (\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => setArticlePanelOpen(true)}\n                  >\n                    <FileText className=\"h-4 w-4 mr-1\" />\n                    Articles\n                  </Button>\n                )}\n              </div>\n              {hasProcessingAlerts && (\n                <div className=\"flex items-center gap-2 text-sm text-amber-600 dark:text-amber-400\">\n                  <Loader2 className=\"h-4 w-4 animate-spin\" />\n                  <span>Processing alerts... Results will appear when ready.</span>\n                </div>\n              )}\n            </div>\n          )}\n\n          <MapContainer\n            ref={mapRef}\n            className=\"h-[280px] w-full min-h-[220px] rounded-lg border border-zinc-200 overflow-hidden sm:h-[400px] sm:min-h-[300px] dark:border-zinc-800\"\n            interactiveLayerIds={LOCATION_PINS_LAYER_IDS}\n          >\n            {!locationsLoading && hasLocations && (\n              <LocationPins data={locations} />\n            )}\n          </MapContainer>\n\n          <div className=\"flex items-center justify-between mt-2 mb-4\">\n            <p className=\"text-sm text-zinc-600 sm:text-base dark:text-zinc-400\">\n              {selectedAlertId\n                ? \"Chat with your alert's articles below.\"\n                : \"Ask research and map below (type or use the mic).\"}\n            </p>\n            {hasLocations && (\n              <span className=\"text-xs text-zinc-500 dark:text-zinc-400\">\n                {locations.features.length} location{locations.features.length !== 1 ? \"s\" : \"\"} on map\n              </span>\n            )}\n          </div>\n\n          <AgentInput selectedAlertId={selectedAlertId} />\n\n          {/* Create Alert Dialog */}\n          <CreateAlertDialog\n            open={createDialogOpen}\n            onOpenChange={setCreateDialogOpen}\n            onCreated={handleAlertCreated}\n          />\n\n          {/* Article Panel Sidebar */}\n          <ArticlePanel\n            open={articlePanelOpen}\n            onOpenChange={setArticlePanelOpen}\n            alert={selectedAlert}\n            loading={locationsLoading && selectedAlertId !== null}\n          />\n        </main>\n      </div>\n    </ProtectedRoute>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}